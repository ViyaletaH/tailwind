(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var IpfsClient=(()=>{var Ay=Object.create;var yn=Object.defineProperty;var Py=Object.getOwnPropertyDescriptor;var Oy=Object.getOwnPropertyNames;var Cy=Object.getPrototypeOf,ky=Object.prototype.hasOwnProperty;var Pa=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),K=(t,e)=>{for(var r in e)yn(t,r,{get:e[r],enumerable:!0})},Oa=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Oy(e))!ky.call(t,o)&&o!==r&&yn(t,o,{get:()=>e[o],enumerable:!(n=Py(e,o))||n.enumerable});return t};var N=(t,e,r)=>(r=t!=null?Ay(Cy(t)):{},Oa(e||!t||!t.__esModule?yn(r,"default",{value:t,enumerable:!0}):r,t)),Iy=t=>Oa(yn({},"__esModule",{value:!0}),t);var Iu=T((_E,ku)=>{ku.exports=Xs;var Cu=128,xb=127,Sb=~xb,Eb=Math.pow(2,31);function Xs(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Xs.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Eb;)e[r++]=t&255|Cu,t/=128;for(;t&Sb;)e[r++]=t&255|Cu,t>>>=7;return e[r]=t|0,Xs.bytes=r-n+1,e}});var Bu=T((AE,Ru)=>{Ru.exports=Ks;var Tb=128,Nu=127;function Ks(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a||o>49)throw Ks.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&Nu)<<o:(i&Nu)*Math.pow(2,o),o+=7}while(i>=Tb);return Ks.bytes=s-n,r}});var Du=T((PE,Uu)=>{var _b=Math.pow(2,7),Ab=Math.pow(2,14),Pb=Math.pow(2,21),Ob=Math.pow(2,28),Cb=Math.pow(2,35),kb=Math.pow(2,42),Ib=Math.pow(2,49),Nb=Math.pow(2,56),Rb=Math.pow(2,63);Uu.exports=function(t){return t<_b?1:t<Ab?2:t<Pb?3:t<Ob?4:t<Cb?5:t<kb?6:t<Ib?7:t<Nb?8:t<Rb?9:10}});var $n=T((OE,Fu)=>{Fu.exports={encode:Iu(),decode:Bu(),encodingLength:Du()}});var oe=T((WE,Ju)=>{"use strict";function Vu(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Kb(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Vu(t,r)}catch{r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),Vu(new o,r)}}Ju.exports=Kb});var Yu=T((r2,Qu)=>{function e0(){return typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}Qu.exports=e0});var ef=T((n2,Zu)=>{"use strict";var t0=Yu(),Jn=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Hr=t0(),r0=Jn&&!Hr,n0=Hr&&!Jn,o0=Hr&&Jn,s0=typeof Pa=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!Hr,i0=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,a0=typeof process<"u"&&typeof process.env<"u"&&!1,c0=typeof navigator<"u"&&navigator.product==="ReactNative";Zu.exports={isTest:a0,isElectron:Hr,isElectronMain:n0,isElectronRenderer:o0,isNode:s0,isBrowser:r0,isWebWorker:i0,isEnvWithDom:Jn,isReactNative:c0}});var nf=T((i2,rf)=>{var tr=1e3,rr=tr*60,nr=rr*60,Ct=nr*24,f0=Ct*7,l0=Ct*365.25;rf.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return d0(t);if(r==="number"&&isFinite(t))return e.long?h0(t):p0(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function d0(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l0;case"weeks":case"week":case"w":return r*f0;case"days":case"day":case"d":return r*Ct;case"hours":case"hour":case"hrs":case"hr":case"h":return r*nr;case"minutes":case"minute":case"mins":case"min":case"m":return r*rr;case"seconds":case"second":case"secs":case"sec":case"s":return r*tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function p0(t){var e=Math.abs(t);return e>=Ct?Math.round(t/Ct)+"d":e>=nr?Math.round(t/nr)+"h":e>=rr?Math.round(t/rr)+"m":e>=tr?Math.round(t/tr)+"s":t+"ms"}function h0(t){var e=Math.abs(t);return e>=Ct?Wn(t,e,Ct,"day"):e>=nr?Wn(t,e,nr,"hour"):e>=rr?Wn(t,e,rr,"minute"):e>=tr?Wn(t,e,tr,"second"):t+" ms"}function Wn(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var sf=T((a2,of)=>{function m0(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=nf(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let y=0;y<f.length;y++)l=(l<<5)-l+f.charCodeAt(y),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,y=null,w,h;function d(...b){if(!d.enabled)return;let x=d,P=Number(new Date),F=P-(l||P);x.diff=F,x.prev=l,x.curr=P,l=P,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(ce,ee)=>{if(ce==="%%")return"%";j++;let ae=r.formatters[ee];if(typeof ae=="function"){let $e=b[j];ce=ae.call(x,$e),b.splice(j,1),j--}return ce}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return d.namespace=f,d.useColors=r.useColors(),d.color=r.selectColor(f),d.extend=n,d.destroy=r.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(w!==r.namespaces&&(w=r.namespaces,h=r.enabled(f)),h),set:b=>{y=b}}),typeof r.init=="function"&&r.init(d),d}function n(f,l){let y=r(this.namespace+(typeof l>"u"?":":l)+f);return y.log=this.log,y}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,y=(typeof f=="string"?f:"").split(/[\s,]+/),w=y.length;for(l=0;l<w;l++)!y[l]||(f=y[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function i(f){if(f[f.length-1]==="*")return!0;let l,y;for(l=0,y=r.skips.length;l<y;l++)if(r.skips[l].test(f))return!1;for(l=0,y=r.names.length;l<y;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}of.exports=m0});var af=T((ye,Xn)=>{ye.formatArgs=g0;ye.save=w0;ye.load=b0;ye.useColors=y0;ye.storage=v0();ye.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ye.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function y0(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function g0(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Xn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}ye.log=console.debug||console.log||(()=>{});function w0(t){try{t?ye.storage.setItem("debug",t):ye.storage.removeItem("debug")}catch{}}function b0(){let t;try{t=ye.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function v0(){try{return localStorage}catch{}}Xn.exports=sf()(ye);var{formatters:x0}=Xn.exports;x0.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ui=T(Qn=>{"use strict";var ii=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}};Qn.TimeoutError=ii;var ai=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}};Qn.AbortError=ai;var ci=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};Qn.HTTPError=ci});var Vr=T((or,cf)=>{"use strict";var S0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof ot<"u")return ot;throw new Error("unable to locate global object")},ot=S0();cf.exports=or=ot.fetch;ot.fetch&&(or.default=ot.fetch.bind(ot));or.Headers=ot.Headers;or.Request=ot.Request;or.Response=ot.Response});var uf=T((p2,fi)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?fi.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:fi.exports={default:Vr().default,Headers:Vr().Headers,Request:Vr().Request,Response:Vr().Response}});var lf=T((h2,ff)=>{"use strict";ff.exports=uf()});var hf=T((m2,pf)=>{"use strict";var{TimeoutError:E0,AbortError:T0}=ui(),{Response:df,Request:_0,Headers:di,default:A0}=lf(),P0=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:n,headers:o}=e;if(n&&n>0&&n<1/0&&(r.timeout=n),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),o)for(let[s,i]of new di(o))r.setRequestHeader(s,i);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((s,i)=>{let a=c=>{switch(c.type){case"error":{s(df.error());break}case"load":{s(new li(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:k0(r.getAllResponseHeaders())}));break}case"timeout":{i(new E0);break}case"abort":{i(new T0);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},O0=A0,C0=(t,e={})=>e.onUploadProgress!=null?P0(t,e):O0(t,e),k0=t=>{let e=new di;for(let r of t.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e},li=class extends df{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}};pf.exports={fetch:C0,Request:_0,Headers:di}});var yf=T((y2,mf)=>{"use strict";mf.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var hi=T((vf,xf)=>{"use strict";var Yn=yf(),{hasOwnProperty:wf}=Object.prototype,{propertyIsEnumerable:I0}=Object,sr=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),N0=vf,gf={concatArrays:!1,ignoreUndefined:!1},Zn=t=>{let e=[];for(let r in t)wf.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)I0.call(t,n)&&e.push(n)}return e};function ir(t){return Array.isArray(t)?R0(t):Yn(t)?B0(t):t}function R0(t){let e=t.slice(0,0);return Zn(t).forEach(r=>{sr(e,r,ir(t[r]))}),e}function B0(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Zn(t).forEach(r=>{sr(e,r,ir(t[r]))}),e}var bf=(t,e,r,n)=>(r.forEach(o=>{typeof e[o]>"u"&&n.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?sr(t,o,pi(t[o],e[o],n)):sr(t,o,ir(e[o])))}),t),U0=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)!wf.call(s,a)||(i.push(String(a)),s===t?sr(n,o++,s[a]):sr(n,o++,ir(s[a])));n=bf(n,s,Zn(s).filter(a=>!i.includes(a)),r)}),n};function pi(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?U0(t,e,r):!Yn(e)||!Yn(t)?ir(e):bf(t,e,Zn(e),r)}xf.exports=function(...t){let e=pi(ir(gf),this!==N0&&this||{},gf),r={_:{}};for(let n of t)if(n!==void 0){if(!Yn(n))throw new TypeError("`"+n+"` is not an Option Object");r=pi(r,{_:n},e)}return r._}});var yi=T((g2,Ef)=>{"use strict";var D0=typeof navigator<"u"&&navigator.product==="ReactNative";function F0(){return D0?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Jr=self.URL,Sf=F0(),mi=class{constructor(e="",r=Sf){this.super=new Jr(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Jr.createObjectURL(e)}static revokeObjectURL(e){Jr.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function L0(t){if(typeof t=="string")return new Jr(t).toString();if(!(t instanceof Jr)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",s=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",f=t.path||u+a;return`${o}${e||r}${s||i+n}${f}${c}`}}Ef.exports={URLWithLegacySupport:mi,URLSearchParams:self.URLSearchParams,defaultBase:Sf,format:L0}});var Af=T((w2,_f)=>{"use strict";var{URLWithLegacySupport:Tf,format:j0}=yi();_f.exports=(t,e={},r={},n)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new Tf(t)}catch{s={}}let i=Object.assign({},e,{protocol:o||s.protocol,host:e.host||s.host});return new Tf(t,j0(i)).toString()}});var Of=T((b2,Pf)=>{"use strict";var{URLWithLegacySupport:M0,format:$0,URLSearchParams:q0,defaultBase:z0}=yi(),H0=Af();Pf.exports={URL:M0,URLSearchParams:q0,format:$0,relative:H0,defaultBase:z0}});var eo=T((v2,gi)=>{function Cf(t){let e=new globalThis.AbortController;function r(){e.abort();for(let n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}gi.exports=Cf;gi.exports.anySignal=Cf});var to=T((x2,Uf)=>{"use strict";var{fetch:V0,Request:J0,Headers:G0}=hf(),{TimeoutError:wi,HTTPError:Rf}=ui(),kf=hi().bind({ignoreUndefined:!0}),{URL:If,URLSearchParams:Nf}=Of(),W0=eo(),X0=(t,e,r)=>{if(e===void 0)return t;let n=Date.now(),o=()=>Date.now()-n>=e;return new Promise((s,i)=>{let a=setTimeout(()=>{o()&&(i(new wi),r.abort())},e),c=u=>l=>{if(clearTimeout(a),o()){i(new wi);return}u(l)};t.then(c(s),c(i))})},K0={throwHttpErrors:!0,credentials:"same-origin"},se=class{constructor(e={}){this.opts=kf(K0,e)}async fetch(e,r={}){let n=kf(this.opts,r),o=new G0(n.headers);if(typeof e!="string"&&!(e instanceof If||e instanceof J0))throw new TypeError("`resource` must be a string, URL, or Request");let s=new If(e.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i&&(typeof a=="function"?s.search=a(new Nf(n.searchParams)):s.search=new Nf(n.searchParams)),c&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let u=new AbortController,f=W0([u.signal,n.signal]),l=await X0(V0(s.toString(),{...n,signal:f,timeout:void 0,headers:o}),n.timeout,u);if(!l.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(l),new Rf(l);return l.iterator=async function*(){yield*Bf(l.body)},l.ndjson=async function*(){for await(let y of Q0(l.iterator()))r.transform?yield r.transform(y):yield y},l}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},Q0=async function*(t){let e=new TextDecoder,r="";for await(let n of t){r+=e.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},Bf=t=>{if(ev(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(Z0(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:n}=await e.read();if(r)return;n&&(yield n)}}finally{e.releaseLock()}}()}if(Y0(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},Y0=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",Z0=t=>t&&typeof t.getReader=="function",ev=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");se.HTTPError=Rf;se.TimeoutError=wi;se.streamToAsyncIterator=Bf;se.post=(t,e)=>new se(e).post(t,e);se.get=(t,e)=>new se(e).get(t,e);se.put=(t,e)=>new se(e).put(t,e);se.delete=(t,e)=>new se(e).delete(t,e);se.options=(t,e)=>new se(e).options(t,e);Uf.exports=se});var bi=T((RT,el)=>{"use strict";el.exports=mv;function mv(t,e){for(var r=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(a,c){r[n]=function(f){if(s)if(s=!1,f)c(f);else{for(var l=new Array(arguments.length-1),y=0;y<l.length;)l[y++]=arguments[y];a.apply(null,l)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var ol=T(nl=>{"use strict";var co=nl;co.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var cr=new Array(64),rl=new Array(123);for(Fe=0;Fe<64;)rl[cr[Fe]=Fe<26?Fe+65:Fe<52?Fe+71:Fe<62?Fe-4:Fe-59|43]=Fe++;var Fe;co.encode=function(e,r,n){for(var o=null,s=[],i=0,a=0,c;r<n;){var u=e[r++];switch(a){case 0:s[i++]=cr[u>>2],c=(u&3)<<4,a=1;break;case 1:s[i++]=cr[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[i++]=cr[c|u>>6],s[i++]=cr[u&63],a=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0)}return a&&(s[i++]=cr[c],s[i++]=61,a===1&&(s[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};var tl="invalid encoding";co.decode=function(e,r,n){for(var o=n,s=0,i,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=rl[c])===void 0)throw Error(tl);switch(s){case 0:i=c,s=1;break;case 1:r[n++]=i<<2|(c&48)>>4,i=c,s=2;break;case 2:r[n++]=(i&15)<<4|(c&60)>>2,i=c,s=3;break;case 3:r[n++]=(i&3)<<6|c,s=0;break}}if(s===1)throw Error(tl);return n-o};co.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var il=T((UT,sl)=>{"use strict";sl.exports=uo;function uo(){this._listeners={}}uo.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};uo.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};uo.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var pl=T((DT,dl)=>{"use strict";dl.exports=al(al);function al(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function o(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=n?o:s,t.writeFloatBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?i:a,t.readFloatBE=n?a:i}():function(){function e(n,o,s,i){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,s,i);else if(isNaN(o))n(2143289344,s,i);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,s,i);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,s,i);else{var c=Math.floor(Math.log(o)/Math.LN2),u=Math.round(o*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,s,i)}}t.writeFloatLE=e.bind(null,cl),t.writeFloatBE=e.bind(null,ul);function r(n,o,s){var i=n(o,s),a=(i>>31)*2+1,c=i>>>23&255,u=i&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,fl),t.readFloatBE=r.bind(null,ll)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function o(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=n?o:s,t.writeDoubleBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?i:a,t.readDoubleBE=n?a:i}():function(){function e(n,o,s,i,a,c){var u=i<0?1:0;if(u&&(i=-i),i===0)n(0,a,c+o),n(1/i>0?0:2147483648,a,c+s);else if(isNaN(i))n(0,a,c+o),n(2146959360,a,c+s);else if(i>17976931348623157e292)n(0,a,c+o),n((u<<31|2146435072)>>>0,a,c+s);else{var f;if(i<22250738585072014e-324)f=i/5e-324,n(f>>>0,a,c+o),n((u<<31|f/4294967296)>>>0,a,c+s);else{var l=Math.floor(Math.log(i)/Math.LN2);l===1024&&(l=1023),f=i*Math.pow(2,-l),n(f*4503599627370496>>>0,a,c+o),n((u<<31|l+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,cl,0,4),t.writeDoubleBE=e.bind(null,ul,4,0);function r(n,o,s,i,a){var c=n(i,a+o),u=n(i,a+s),f=(u>>31)*2+1,l=u>>>20&2047,y=4294967296*(u&1048575)+c;return l===2047?y?NaN:f*(1/0):l===0?f*5e-324*y:f*Math.pow(2,l-1075)*(y+4503599627370496)}t.readDoubleLE=r.bind(null,fl,0,4),t.readDoubleBE=r.bind(null,ll,4,0)}(),t}function cl(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function ul(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function fl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function ll(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var vi=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var ml=T(hl=>{"use strict";var xi=hl;xi.length=function(e){for(var r=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r};xi.read=function(e,r,n){var o=n-r;if(o<1)return"";for(var s=null,i=[],a=0,c;r<n;)c=e[r++],c<128?i[a++]=c:c>191&&c<224?i[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(c>>10),i[a++]=56320+(c&1023)):i[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};xi.write=function(e,r,n){for(var o=n,s,i,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-o}});var gl=T((LT,yl)=>{"use strict";yl.exports=yv;function yv(t,e,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(c){if(c<1||c>o)return t(c);i+c>n&&(s=t(n),i=0);var u=e.call(s,i,i+=c);return i&7&&(i=(i|7)+1),u}}});var bl=T((jT,wl)=>{"use strict";wl.exports=Z;var Zr=Ge();function Z(t,e){this.lo=t>>>0,this.hi=e>>>0}var Nt=Z.zero=new Z(0,0);Nt.toNumber=function(){return 0};Nt.zzEncode=Nt.zzDecode=function(){return this};Nt.length=function(){return 1};var gv=Z.zeroHash="\0\0\0\0\0\0\0\0";Z.fromNumber=function(e){if(e===0)return Nt;var r=e<0;r&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Z(n,o)};Z.from=function(e){if(typeof e=="number")return Z.fromNumber(e);if(Zr.isString(e))if(Zr.Long)e=Zr.Long.fromString(e);else return Z.fromNumber(parseInt(e,10));return e.low||e.high?new Z(e.low>>>0,e.high>>>0):Nt};Z.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Z.prototype.toLong=function(e){return Zr.Long?new Zr.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var vt=String.prototype.charCodeAt;Z.fromHash=function(e){return e===gv?Nt:new Z((vt.call(e,0)|vt.call(e,1)<<8|vt.call(e,2)<<16|vt.call(e,3)<<24)>>>0,(vt.call(e,4)|vt.call(e,5)<<8|vt.call(e,6)<<16|vt.call(e,7)<<24)>>>0)};Z.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Z.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Z.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Z.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Ge=T(Si=>{"use strict";var A=Si;A.asPromise=bi();A.base64=ol();A.EventEmitter=il();A.float=pl();A.inquire=vi();A.utf8=ml();A.pool=gl();A.LongBits=bl();A.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);A.global=A.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Si;A.emptyArray=Object.freeze?Object.freeze([]):[];A.emptyObject=Object.freeze?Object.freeze({}):{};A.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};A.isString=function(e){return typeof e=="string"||e instanceof String};A.isObject=function(e){return e&&typeof e=="object"};A.isset=A.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};A.Buffer=function(){try{var t=A.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();A._Buffer_from=null;A._Buffer_allocUnsafe=null;A.newBuffer=function(e){return typeof e=="number"?A.Buffer?A._Buffer_allocUnsafe(e):new A.Array(e):A.Buffer?A._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};A.Array=typeof Uint8Array<"u"?Uint8Array:Array;A.Long=A.global.dcodeIO&&A.global.dcodeIO.Long||A.global.Long||A.inquire("long");A.key2Re=/^true|false|0|1$/;A.key32Re=/^-?(?:0|[1-9][0-9]*)$/;A.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;A.longToHash=function(e){return e?A.LongBits.from(e).toHash():A.LongBits.zeroHash};A.longFromHash=function(e,r){var n=A.LongBits.fromHash(e);return A.Long?A.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function vl(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)(t[n[o]]===void 0||!r)&&(t[n[o]]=e[n[o]]);return t}A.merge=vl;A.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function xl(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&vl(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}A.newError=xl;A.ProtocolError=xl("ProtocolError");A.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(r[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}};A.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};A.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};A._configure=function(){var t=A.Buffer;if(!t){A._Buffer_from=A._Buffer_allocUnsafe=null;return}A._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},A._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var lo=T(($T,_l)=>{"use strict";_l.exports=R;var Te=Ge(),Ei,fo=Te.LongBits,Sl=Te.base64,El=Te.utf8;function en(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function _i(){}function wv(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function R(){this.len=0,this.head=new en(_i,0,0),this.tail=this.head,this.states=null}var Tl=function(){return Te.Buffer?function(){return(R.create=function(){return new Ei})()}:function(){return new R}};R.create=Tl();R.alloc=function(e){return new Te.Array(e)};Te.Array!==Array&&(R.alloc=Te.pool(R.alloc,Te.Array.prototype.subarray));R.prototype._push=function(e,r,n){return this.tail=this.tail.next=new en(e,r,n),this.len+=r,this};function Ai(t,e,r){e[r]=t&255}function bv(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Pi(t,e){this.len=t,this.next=void 0,this.val=e}Pi.prototype=Object.create(en.prototype);Pi.prototype.fn=bv;R.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Pi((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};R.prototype.int32=function(e){return e<0?this._push(Oi,10,fo.fromNumber(e)):this.uint32(e)};R.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Oi(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}R.prototype.uint64=function(e){var r=fo.from(e);return this._push(Oi,r.length(),r)};R.prototype.int64=R.prototype.uint64;R.prototype.sint64=function(e){var r=fo.from(e).zzEncode();return this._push(Oi,r.length(),r)};R.prototype.bool=function(e){return this._push(Ai,1,e?1:0)};function Ti(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}R.prototype.fixed32=function(e){return this._push(Ti,4,e>>>0)};R.prototype.sfixed32=R.prototype.fixed32;R.prototype.fixed64=function(e){var r=fo.from(e);return this._push(Ti,4,r.lo)._push(Ti,4,r.hi)};R.prototype.sfixed64=R.prototype.fixed64;R.prototype.float=function(e){return this._push(Te.float.writeFloatLE,4,e)};R.prototype.double=function(e){return this._push(Te.float.writeDoubleLE,8,e)};var vv=Te.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var o=0;o<e.length;++o)r[n+o]=e[o]};R.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Ai,1,0);if(Te.isString(e)){var n=R.alloc(r=Sl.length(e));Sl.decode(e,n,0),e=n}return this.uint32(r)._push(vv,r,e)};R.prototype.string=function(e){var r=El.length(e);return r?this.uint32(r)._push(El.write,r,e):this._push(Ai,1,0)};R.prototype.fork=function(){return this.states=new wv(this),this.head=this.tail=new en(_i,0,0),this.len=0,this};R.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new en(_i,0,0),this.len=0),this};R.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};R.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};R._configure=function(t){Ei=t,R.create=Tl(),Ei._configure()}});var Ol=T((qT,Pl)=>{"use strict";Pl.exports=We;var Al=lo();(We.prototype=Object.create(Al.prototype)).constructor=We;var xt=Ge();function We(){Al.call(this)}We._configure=function(){We.alloc=xt._Buffer_allocUnsafe,We.writeBytesBuffer=xt.Buffer&&xt.Buffer.prototype instanceof Uint8Array&&xt.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var o=0;o<e.length;)r[n++]=e[o++]}};We.prototype.bytes=function(e){xt.isString(e)&&(e=xt._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(We.writeBytesBuffer,r,e),this};function xv(t,e,r){t.length<40?xt.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}We.prototype.string=function(e){var r=xt.Buffer.byteLength(e);return this.uint32(r),r&&this._push(xv,r,e),this};We._configure()});var ho=T((zT,Rl)=>{"use strict";Rl.exports=z;var Xe=Ge(),ki,Il=Xe.LongBits,Sv=Xe.utf8;function Le(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function z(t){this.buf=t,this.pos=0,this.len=t.length}var Cl=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new z(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new z(e);throw Error("illegal buffer")},Nl=function(){return Xe.Buffer?function(r){return(z.create=function(o){return Xe.Buffer.isBuffer(o)?new ki(o):Cl(o)})(r)}:Cl};z.create=Nl();z.prototype._slice=Xe.Array.prototype.subarray||Xe.Array.prototype.slice;z.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Le(this,10);return e}}();z.prototype.int32=function(){return this.uint32()|0};z.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Ci(){var t=new Il(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Le(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Le(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}z.prototype.bool=function(){return this.uint32()!==0};function po(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}z.prototype.fixed32=function(){if(this.pos+4>this.len)throw Le(this,4);return po(this.buf,this.pos+=4)};z.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Le(this,4);return po(this.buf,this.pos+=4)|0};function kl(){if(this.pos+8>this.len)throw Le(this,8);return new Il(po(this.buf,this.pos+=4),po(this.buf,this.pos+=4))}z.prototype.float=function(){if(this.pos+4>this.len)throw Le(this,4);var e=Xe.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};z.prototype.double=function(){if(this.pos+8>this.len)throw Le(this,4);var e=Xe.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};z.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Le(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};z.prototype.string=function(){var e=this.bytes();return Sv.read(e,0,e.length)};z.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Le(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Le(this);while(this.buf[this.pos++]&128);return this};z.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};z._configure=function(t){ki=t,z.create=Nl(),ki._configure();var e=Xe.Long?"toLong":"toNumber";Xe.merge(z.prototype,{int64:function(){return Ci.call(this)[e](!1)},uint64:function(){return Ci.call(this)[e](!0)},sint64:function(){return Ci.call(this).zzDecode()[e](!1)},fixed64:function(){return kl.call(this)[e](!0)},sfixed64:function(){return kl.call(this)[e](!1)}})}});var Fl=T((HT,Dl)=>{"use strict";Dl.exports=Rt;var Ul=ho();(Rt.prototype=Object.create(Ul.prototype)).constructor=Rt;var Bl=Ge();function Rt(t){Ul.call(this,t)}Rt._configure=function(){Bl.Buffer&&(Rt.prototype._slice=Bl.Buffer.prototype.slice)};Rt.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Rt._configure()});var jl=T((VT,Ll)=>{"use strict";Ll.exports=tn;var Ii=Ge();(tn.prototype=Object.create(Ii.EventEmitter.prototype)).constructor=tn;function tn(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Ii.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}tn.prototype.rpcCall=function t(e,r,n,o,s){if(!o)throw TypeError("request must be specified");var i=this;if(!s)return Ii.asPromise(t,i,e,r,n,o);if(!i.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return i.rpcImpl(e,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,u){if(c)return i.emit("error",c,e),s(c);if(u===null){i.end(!0);return}if(!(u instanceof n))try{u=n[i.responseDelimited?"decodeDelimited":"decode"](u)}catch(f){return i.emit("error",f,e),s(f)}return i.emit("data",u,e),s(null,u)})}catch(a){i.emit("error",a,e),setTimeout(function(){s(a)},0);return}};tn.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Ni=T(Ml=>{"use strict";var Ev=Ml;Ev.Service=jl()});var Ri=T((GT,$l)=>{"use strict";$l.exports={}});var Bi=T(zl=>{"use strict";var ue=zl;ue.build="minimal";ue.Writer=lo();ue.BufferWriter=Ol();ue.Reader=ho();ue.BufferReader=Fl();ue.util=Ge();ue.rpc=Ni();ue.roots=Ri();ue.configure=ql;function ql(){ue.util._configure(),ue.Writer._configure(ue.BufferWriter),ue.Reader._configure(ue.BufferReader)}ql()});var Vl=T((XT,Hl)=>{"use strict";Hl.exports=Bi()});var jd=T((z3,Ld)=>{Ld.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var Ih=T((sN,kh)=>{"use strict";var Jv=to(),Gv=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:Wv(t,e)});async function*Wv(t,e){yield*(await new Jv().get(t,e)).iterator()}kh.exports=Gv});var Uh=T((XN,Bh)=>{"use strict";Bh.exports=$i;function $i(t,e){typeof t=="string"&&(e=t,t=void 0);var r=[];function n(s){if(typeof s!="string"){var i=o();if($i.verbose&&console.log("codegen: "+i),i="return "+i,s){for(var a=Object.keys(s),c=new Array(a.length+1),u=new Array(a.length),f=0;f<a.length;)c[f]=a[f],u[f]=s[a[f++]];return c[f]=i,Function.apply(null,c).apply(null,u)}return Function(i)()}for(var l=new Array(arguments.length-1),y=0;y<l.length;)l[y]=arguments[++y];if(y=0,s=s.replace(/%([%dfijs])/g,function(h,d){var b=l[y++];switch(d){case"d":case"f":return String(Number(b));case"i":return String(Math.floor(b));case"j":return JSON.stringify(b);case"s":return String(b)}return"%"}),y!==l.length)throw Error("parameter count mismatch");return r.push(s),n}function o(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+r.join(`
  `)+`
}`}return n.toString=o,n}$i.verbose=!1});var Fh=T((KN,Dh)=>{"use strict";Dh.exports=on;var Kv=bi(),Qv=vi(),qi=Qv("fs");function on(t,e,r){return typeof e=="function"?(r=e,e={}):e||(e={}),r?!e.xhr&&qi&&qi.readFile?qi.readFile(t,function(o,s){return o&&typeof XMLHttpRequest<"u"?on.xhr(t,e,r):o?r(o):r(null,e.binary?s:s.toString("utf8"))}):on.xhr(t,e,r):Kv(on,this,t,e)}on.xhr=function(e,r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==0&&o.status!==200)return n(Error("status "+o.status));if(r.binary){var i=o.response;if(!i){i=[];for(var a=0;a<o.responseText.length;++a)i.push(o.responseText.charCodeAt(a)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(i):i)}return n(null,o.responseText)}},r.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",e),o.send()}});var Mh=T(jh=>{"use strict";var Hi=jh,Lh=Hi.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},zi=Hi.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var r=e.split("/"),n=Lh(e),o="";n&&(o=r.shift()+"/");for(var s=0;s<r.length;)r[s]===".."?s>0&&r[s-1]!==".."?r.splice(--s,2):n?r.splice(s,1):++s:r[s]==="."?r.splice(s,1):++s;return o+r.join("/")};Hi.resolve=function(e,r,n){return n||(r=zi(r)),Lh(r)?r:(n||(e=zi(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?zi(e+"/"+r):r)}});var gr=T($h=>{"use strict";var sn=$h,Yv=ne(),Zv=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function an(t,e){var r=0,n={};for(e|=0;r<t.length;)n[Zv[r+e]]=t[r++];return n}sn.basic=an([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);sn.defaults=an([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",Yv.emptyArray,null]);sn.long=an([0,0,0,1,1],7);sn.mapKey=an([0,0,0,5,5,0,0,0,1,1,0,2],2);sn.packed=an([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Ut=T((ZN,Hh)=>{"use strict";Hh.exports=Ae;var ko=Dt();((Ae.prototype=Object.create(ko.prototype)).constructor=Ae).className="Field";var qh=Ke(),zh=gr(),X=ne(),Vi,e1=/^required|optional|repeated$/;Ae.fromJSON=function(e,r){return new Ae(e,r.id,r.type,r.rule,r.extend,r.options,r.comment)};function Ae(t,e,r,n,o,s,i){if(X.isObject(n)?(i=o,s=n,n=o=void 0):X.isObject(o)&&(i=s,s=o,o=void 0),ko.call(this,t,s),!X.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!X.isString(r))throw TypeError("type must be a string");if(n!==void 0&&!e1.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==void 0&&!X.isString(o))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=r,this.id=e,this.extend=o||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=X.Long?zh.long[r]!==void 0:!1,this.bytes=r==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=i}Object.defineProperty(Ae.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Ae.prototype.setOption=function(e,r,n){return e==="packed"&&(this._packed=null),ko.prototype.setOption.call(this,e,r,n)};Ae.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return X.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};Ae.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=zh.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Vi?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof qh&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof qh))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=X.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;X.base64.test(this.typeDefault)?X.base64.decode(this.typeDefault,e=X.newBuffer(X.base64.length(this.typeDefault)),0):X.utf8.write(this.typeDefault,e=X.newBuffer(X.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=X.emptyObject:this.repeated?this.defaultValue=X.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Vi&&(this.parent.ctor.prototype[this.name]=this.defaultValue),ko.prototype.resolve.call(this)};Ae.d=function(e,r,n,o){return typeof r=="function"?r=X.decorateType(r).name:r&&typeof r=="object"&&(r=X.decorateEnum(r).name),function(i,a){X.decorateType(i.constructor).add(new Ae(a,e,r,n,{default:o}))}};Ae._configure=function(e){Vi=e}});var cn=T((eR,Gh)=>{"use strict";Gh.exports=Pe;var No=Dt();((Pe.prototype=Object.create(No.prototype)).constructor=Pe).className="OneOf";var Vh=Ut(),Io=ne();function Pe(t,e,r,n){if(Array.isArray(e)||(r=e,e=void 0),No.call(this,t,r),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}Pe.fromJSON=function(e,r){return new Pe(e,r.oneof,r.options,r.comment)};Pe.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return Io.toObject(["options",this.options,"oneof",this.oneof,"comment",r?this.comment:void 0])};function Jh(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}Pe.prototype.add=function(e){if(!(e instanceof Vh))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,Jh(this),this};Pe.prototype.remove=function(e){if(!(e instanceof Vh))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(e);if(r<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(r,1),r=this.oneof.indexOf(e.name),r>-1&&this.oneof.splice(r,1),e.partOf=null,this};Pe.prototype.onAdd=function(e){No.prototype.onAdd.call(this,e);for(var r=this,n=0;n<this.oneof.length;++n){var o=e.get(this.oneof[n]);o&&!o.partOf&&(o.partOf=r,r.fieldsArray.push(o))}Jh(this)};Pe.prototype.onRemove=function(e){for(var r=0,n;r<this.fieldsArray.length;++r)(n=this.fieldsArray[r]).parent&&n.parent.remove(n);No.prototype.onRemove.call(this,e)};Pe.d=function(){for(var e=new Array(arguments.length),r=0;r<arguments.length;)e[r]=arguments[r++];return function(o,s){Io.decorateType(o.constructor).add(new Pe(s,e)),Object.defineProperty(o,s,{get:Io.oneOfGetter(e),set:Io.oneOfSetter(e)})}}});var vr=T((tR,Qh)=>{"use strict";Qh.exports=U;var Ji=Dt();((U.prototype=Object.create(Ji.prototype)).constructor=U).className="Namespace";var Wh=Ut(),Ro=ne(),t1=cn(),wr,un,br;U.fromJSON=function(e,r){return new U(e,r.options).addJSON(r.nested)};function Xh(t,e){if(!!(t&&t.length)){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(e);return r}}U.arrayToJSON=Xh;U.isReservedId=function(e,r){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=r&&e[n][1]>r)return!0}return!1};U.isReservedName=function(e,r){if(e){for(var n=0;n<e.length;++n)if(e[n]===r)return!0}return!1};function U(t,e){Ji.call(this,t,e),this.nested=void 0,this._nestedArray=null}function Kh(t){return t._nestedArray=null,t}Object.defineProperty(U.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Ro.toArray(this.nested))}});U.prototype.toJSON=function(e){return Ro.toObject(["options",this.options,"nested",Xh(this.nestedArray,e)])};U.prototype.addJSON=function(e){var r=this;if(e)for(var n=Object.keys(e),o=0,s;o<n.length;++o)s=e[n[o]],r.add((s.fields!==void 0?wr.fromJSON:s.values!==void 0?br.fromJSON:s.methods!==void 0?un.fromJSON:s.id!==void 0?Wh.fromJSON:U.fromJSON)(n[o],s));return this};U.prototype.get=function(e){return this.nested&&this.nested[e]||null};U.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof br)return this.nested[e].values;throw Error("no such enum: "+e)};U.prototype.add=function(e){if(!(e instanceof Wh&&e.extend!==void 0||e instanceof wr||e instanceof t1||e instanceof br||e instanceof un||e instanceof U))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var r=this.get(e.name);if(r)if(r instanceof U&&e instanceof U&&!(r instanceof wr||r instanceof un)){for(var n=r.nestedArray,o=0;o<n.length;++o)e.add(n[o]);this.remove(r),this.nested||(this.nested={}),e.setOptions(r.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),Kh(this)};U.prototype.remove=function(e){if(!(e instanceof Ji))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),Kh(this)};U.prototype.define=function(e,r){if(Ro.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var o=e.shift();if(n.nested&&n.nested[o]){if(n=n.nested[o],!(n instanceof U))throw Error("path conflicts with non-namespace objects")}else n.add(n=new U(o))}return r&&n.addJSON(r),n};U.prototype.resolveAll=function(){for(var e=this.nestedArray,r=0;r<e.length;)e[r]instanceof U?e[r++].resolveAll():e[r++].resolve();return this.resolve()};U.prototype.lookup=function(e,r,n){if(typeof r=="boolean"?(n=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),Ro.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),r);var o=this.get(e[0]);if(o){if(e.length===1){if(!r||r.indexOf(o.constructor)>-1)return o}else if(o instanceof U&&(o=o.lookup(e.slice(1),r,!0)))return o}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof U&&(o=this._nestedArray[s].lookup(e,r,!0)))return o;return this.parent===null||n?null:this.parent.lookup(e,r)};U.prototype.lookupType=function(e){var r=this.lookup(e,[wr]);if(!r)throw Error("no such type: "+e);return r};U.prototype.lookupEnum=function(e){var r=this.lookup(e,[br]);if(!r)throw Error("no such Enum '"+e+"' in "+this);return r};U.prototype.lookupTypeOrEnum=function(e){var r=this.lookup(e,[wr,br]);if(!r)throw Error("no such Type or Enum '"+e+"' in "+this);return r};U.prototype.lookupService=function(e){var r=this.lookup(e,[un]);if(!r)throw Error("no such Service '"+e+"' in "+this);return r};U._configure=function(t,e,r){wr=t,un=e,br=r}});var Wi=T((rR,Yh)=>{"use strict";Yh.exports=ft;var Gi=Ut();((ft.prototype=Object.create(Gi.prototype)).constructor=ft).className="MapField";var r1=gr(),fn=ne();function ft(t,e,r,n,o,s){if(Gi.call(this,t,e,n,void 0,void 0,o,s),!fn.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}ft.fromJSON=function(e,r){return new ft(e,r.id,r.keyType,r.type,r.options,r.comment)};ft.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return fn.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",r?this.comment:void 0])};ft.prototype.resolve=function(){if(this.resolved)return this;if(r1.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Gi.prototype.resolve.call(this)};ft.d=function(e,r,n){return typeof n=="function"?n=fn.decorateType(n).name:n&&typeof n=="object"&&(n=fn.decorateEnum(n).name),function(s,i){fn.decorateType(s.constructor).add(new ft(i,e,r,n))}}});var Ki=T((nR,Zh)=>{"use strict";Zh.exports=Ft;var Xi=Dt();((Ft.prototype=Object.create(Xi.prototype)).constructor=Ft).className="Method";var xr=ne();function Ft(t,e,r,n,o,s,i,a,c){if(xr.isObject(o)?(i=o,o=s=void 0):xr.isObject(s)&&(i=s,s=void 0),!(e===void 0||xr.isString(e)))throw TypeError("type must be a string");if(!xr.isString(r))throw TypeError("requestType must be a string");if(!xr.isString(n))throw TypeError("responseType must be a string");Xi.call(this,t,i),this.type=e||"rpc",this.requestType=r,this.requestStream=o?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=c}Ft.fromJSON=function(e,r){return new Ft(e,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)};Ft.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return xr.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])};Ft.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Xi.prototype.resolve.call(this))}});var Yi=T((oR,tm)=>{"use strict";tm.exports=Oe;var St=vr();((Oe.prototype=Object.create(St.prototype)).constructor=Oe).className="Service";var Qi=Ki(),ln=ne(),n1=Ni();function Oe(t,e){St.call(this,t,e),this.methods={},this._methodsArray=null}Oe.fromJSON=function(e,r){var n=new Oe(e,r.options);if(r.methods)for(var o=Object.keys(r.methods),s=0;s<o.length;++s)n.add(Qi.fromJSON(o[s],r.methods[o[s]]));return r.nested&&n.addJSON(r.nested),n.comment=r.comment,n};Oe.prototype.toJSON=function(e){var r=St.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return ln.toObject(["options",r&&r.options||void 0,"methods",St.arrayToJSON(this.methodsArray,e)||{},"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(Oe.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=ln.toArray(this.methods))}});function em(t){return t._methodsArray=null,t}Oe.prototype.get=function(e){return this.methods[e]||St.prototype.get.call(this,e)};Oe.prototype.resolveAll=function(){for(var e=this.methodsArray,r=0;r<e.length;++r)e[r].resolve();return St.prototype.resolve.call(this)};Oe.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Qi?(this.methods[e.name]=e,e.parent=this,em(this)):St.prototype.add.call(this,e)};Oe.prototype.remove=function(e){if(e instanceof Qi){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,em(this)}return St.prototype.remove.call(this,e)};Oe.prototype.create=function(e,r,n){for(var o=new n1.Service(e,r,n),s=0,i;s<this.methodsArray.length;++s){var a=ln.lcFirst((i=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");o[a]=ln.codegen(["r","c"],ln.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return o}});var Bo=T((sR,rm)=>{"use strict";rm.exports=Qe;var o1=Ge();function Qe(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}Qe.create=function(e){return this.$type.create(e)};Qe.encode=function(e,r){return this.$type.encode(e,r)};Qe.encodeDelimited=function(e,r){return this.$type.encodeDelimited(e,r)};Qe.decode=function(e){return this.$type.decode(e)};Qe.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Qe.verify=function(e){return this.$type.verify(e)};Qe.fromObject=function(e){return this.$type.fromObject(e)};Qe.toObject=function(e,r){return this.$type.toObject(e,r)};Qe.prototype.toJSON=function(){return this.$type.toObject(this,o1.toJSONOptions)}});var Zi=T((iR,om)=>{"use strict";om.exports=a1;var s1=Ke(),lt=gr(),nm=ne();function i1(t){return"missing required '"+t.name+"'"}function a1(t){var e=nm.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var n=t._fieldsArray[r].resolve(),o=n.resolvedType instanceof s1?"int32":n.type,s="m"+nm.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),lt.defaults[n.keyType]!==void 0?e("k=%j",lt.defaults[n.keyType]):e("k=null"),lt.defaults[o]!==void 0?e("value=%j",lt.defaults[o]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),lt.basic[o]===void 0?e("value=types[%i].decode(r,r.uint32())",r):e("value=r.%s()",o),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),lt.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):n.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),lt.packed[o]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,o)("}else"),lt.basic[o]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,r):e("%s.push(r.%s())",s,o)):lt.basic[o]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,r):e("%s=r.%s()",s,o),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t._fieldsArray.length;++r){var i=t._fieldsArray[r];i.required&&e("if(!m.hasOwnProperty(%j))",i.name)("throw util.ProtocolError(%j,{instance:m})",i1(i))}return e("return m")}});var ra=T((aR,sm)=>{"use strict";sm.exports=f1;var c1=Ke(),ea=ne();function Ce(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function ta(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof c1){t("switch(%s){",n)("default:")("return%j",Ce(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),s=0;s<o.length;++s)t("case %i:",e.resolvedType.values[o[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",Ce(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",Ce(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",Ce(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",Ce(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",Ce(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",Ce(e,"buffer"));break}return t}function u1(t,e,r){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",Ce(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",Ce(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",Ce(e,"boolean key"));break}return t}function f1(t){var e=ea.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&e("var p={}");for(var o=0;o<t.fieldsArray.length;++o){var s=t._fieldsArray[o].resolve(),i="m"+ea.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",i,s.name),s.map)e("if(!util.isObject(%s))",i)("return%j",Ce(s,"object"))("var k=Object.keys(%s)",i)("for(var i=0;i<k.length;++i){"),u1(e,s,"k[i]"),ta(e,s,o,i+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",i)("return%j",Ce(s,"array"))("for(var i=0;i<%s.length;++i){",i),ta(e,s,o,i+"[i]")("}");else{if(s.partOf){var a=ea.safeProp(s.partOf.name);n[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,e("p%s=1",a)}ta(e,s,o,i)}s.optional&&e("}")}return e("return null")}});var sa=T(am=>{"use strict";var im=am,dn=Ke(),Ye=ne();function na(t,e,r,n){var o=!1;if(e.resolvedType)if(e.resolvedType instanceof dn){t("switch(d%s){",n);for(var s=e.resolvedType.values,i=Object.keys(s),a=0;a<i.length;++a)s[i[a]]===e.typeDefault&&!o&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),e.repeated||t("break"),o=!0),t("case%j:",i[a])("case %i:",s[i[a]])("m%s=%j",n,s[i[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n);break}}return t}im.fromObject=function(e){var r=e.fieldsArray,n=Ye.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return n("return new this.ctor");n("var m=new this.ctor");for(var o=0;o<r.length;++o){var s=r[o].resolve(),i=Ye.safeProp(s.name);s.map?(n("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),na(n,s,o,i+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),na(n,s,o,i+"[i]")("}")("}")):(s.resolvedType instanceof dn||n("if(d%s!=null){",i),na(n,s,o,i),s.resolvedType instanceof dn||n("}"))}return n("return m")};function oa(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof dn?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n);break}}return t}im.toObject=function(e){var r=e.fieldsArray.slice().sort(Ye.compareFieldsById);if(!r.length)return Ye.codegen()("return {}");for(var n=Ye.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),o=[],s=[],i=[],a=0;a<r.length;++a)r[a].partOf||(r[a].resolve().repeated?o:r[a].map?s:i).push(r[a]);if(o.length){for(n("if(o.arrays||o.defaults){"),a=0;a<o.length;++a)n("d%s=[]",Ye.safeProp(o[a].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),a=0;a<s.length;++a)n("d%s={}",Ye.safeProp(s[a].name));n("}")}if(i.length){for(n("if(o.defaults){"),a=0;a<i.length;++a){var c=i[a],u=Ye.safeProp(c.name);if(c.resolvedType instanceof dn)n("d%s=o.enums===String?%j:%j",u,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var f="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",u,f)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,c.typeDefault)}n("}")}var l=!1;for(a=0;a<r.length;++a){var c=r[a],y=e._fieldsArray.indexOf(c),u=Ye.safeProp(c.name);c.map?(l||(l=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),oa(n,c,y,u+"[ks2[j]]")("}")):c.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),oa(n,c,y,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,c.name),oa(n,c,y,u),c.partOf&&n("if(o.oneofs)")("d%s=%j",Ye.safeProp(c.partOf.name),c.name)),n("}")}return n("return d")}});var ia=T(cm=>{"use strict";var l1=cm,d1=Bo();l1[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(e);if(r){var n=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var r="type.googleapis.com/",n="",o="";if(e&&e.json&&t.type_url&&t.value){o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(o);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof d1){var i=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return n===""&&(n=r),o=n+a,i["@type"]=o,i}return this.toObject(t,e)}}});var fa=T((fR,fm)=>{"use strict";fm.exports=L;var Me=vr();((L.prototype=Object.create(Me.prototype)).constructor=L).className="Type";var p1=Ke(),ua=cn(),Uo=Ut(),h1=Wi(),m1=Yi(),aa=Bo(),ca=ho(),y1=lo(),ie=ne(),g1=la(),w1=Zi(),b1=ra(),um=sa(),v1=ia();function L(t,e){Me.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(L.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ie.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ie.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=L.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof aa||((t.prototype=new aa).constructor=t,ie.merge(t.prototype,e)),t.$type=t.prototype.$type=this,ie.merge(t,aa,!0),this._ctor=t;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:ie.oneOfGetter(this._oneofsArray[r].oneof),set:ie.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}});L.generateConstructor=function(e){for(var r=ie.codegen(["p"],e.name),n=0,o;n<e.fieldsArray.length;++n)(o=e._fieldsArray[n]).map?r("this%s={}",ie.safeProp(o.name)):o.repeated&&r("this%s=[]",ie.safeProp(o.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function Do(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}L.fromJSON=function(e,r){var n=new L(e,r.options);n.extensions=r.extensions,n.reserved=r.reserved;for(var o=Object.keys(r.fields),s=0;s<o.length;++s)n.add((typeof r.fields[o[s]].keyType<"u"?h1.fromJSON:Uo.fromJSON)(o[s],r.fields[o[s]]));if(r.oneofs)for(o=Object.keys(r.oneofs),s=0;s<o.length;++s)n.add(ua.fromJSON(o[s],r.oneofs[o[s]]));if(r.nested)for(o=Object.keys(r.nested),s=0;s<o.length;++s){var i=r.nested[o[s]];n.add((i.id!==void 0?Uo.fromJSON:i.fields!==void 0?L.fromJSON:i.values!==void 0?p1.fromJSON:i.methods!==void 0?m1.fromJSON:Me.fromJSON)(o[s],i))}return r.extensions&&r.extensions.length&&(n.extensions=r.extensions),r.reserved&&r.reserved.length&&(n.reserved=r.reserved),r.group&&(n.group=!0),r.comment&&(n.comment=r.comment),n};L.prototype.toJSON=function(e){var r=Me.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return ie.toObject(["options",r&&r.options||void 0,"oneofs",Me.arrayToJSON(this.oneofsArray,e),"fields",Me.arrayToJSON(this.fieldsArray.filter(function(o){return!o.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",n?this.comment:void 0])};L.prototype.resolveAll=function(){for(var e=this.fieldsArray,r=0;r<e.length;)e[r++].resolve();var n=this.oneofsArray;for(r=0;r<n.length;)n[r++].resolve();return Me.prototype.resolveAll.call(this)};L.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};L.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Uo&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),Do(this)}return e instanceof ua?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),Do(this)):Me.prototype.add.call(this,e)};L.prototype.remove=function(e){if(e instanceof Uo&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),Do(this)}if(e instanceof ua){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),Do(this)}return Me.prototype.remove.call(this,e)};L.prototype.isReservedId=function(e){return Me.isReservedId(this.reserved,e)};L.prototype.isReservedName=function(e){return Me.isReservedName(this.reserved,e)};L.prototype.create=function(e){return new this.ctor(e)};L.prototype.setup=function(){for(var e=this.fullName,r=[],n=0;n<this.fieldsArray.length;++n)r.push(this._fieldsArray[n].resolve().resolvedType);this.encode=g1(this)({Writer:y1,types:r,util:ie}),this.decode=w1(this)({Reader:ca,types:r,util:ie}),this.verify=b1(this)({types:r,util:ie}),this.fromObject=um.fromObject(this)({types:r,util:ie}),this.toObject=um.toObject(this)({types:r,util:ie});var o=v1[e];if(o){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(s),s.toObject=this.toObject,this.toObject=o.toObject.bind(s)}return this};L.prototype.encode=function(e,r){return this.setup().encode(e,r)};L.prototype.encodeDelimited=function(e,r){return this.encode(e,r&&r.len?r.fork():r).ldelim()};L.prototype.decode=function(e,r){return this.setup().decode(e,r)};L.prototype.decodeDelimited=function(e){return e instanceof ca||(e=ca.create(e)),this.decode(e,e.uint32())};L.prototype.verify=function(e){return this.setup().verify(e)};L.prototype.fromObject=function(e){return this.setup().fromObject(e)};L.prototype.toObject=function(e,r){return this.setup().toObject(e,r)};L.d=function(e){return function(n){ie.decorateType(n,e)}}});var ha=T((lR,mm)=>{"use strict";mm.exports=ge;var Lo=vr();((ge.prototype=Object.create(Lo.prototype)).constructor=ge).className="Root";var pa=Ut(),dm=Ke(),x1=cn(),Et=ne(),pm,da,pn;function ge(t){Lo.call(this,"",t),this.deferred=[],this.files=[]}ge.fromJSON=function(e,r){return r||(r=new ge),e.options&&r.setOptions(e.options),r.addJSON(e.nested)};ge.prototype.resolvePath=Et.path.resolve;ge.prototype.fetch=Et.fetch;function hm(){}ge.prototype.load=function t(e,r,n){typeof r=="function"&&(n=r,r=void 0);var o=this;if(!n)return Et.asPromise(t,o,e,r);var s=n===hm;function i(w,h){if(!!n){var d=n;if(n=null,s)throw w;d(w,h)}}function a(w){var h=w.lastIndexOf("google/protobuf/");if(h>-1){var d=w.substring(h);if(d in pn)return d}return null}function c(w,h){try{if(Et.isString(h)&&h.charAt(0)==="{"&&(h=JSON.parse(h)),!Et.isString(h))o.setOptions(h.options).addJSON(h.nested);else{da.filename=w;var d=da(h,o,r),b,x=0;if(d.imports)for(;x<d.imports.length;++x)(b=a(d.imports[x])||o.resolvePath(w,d.imports[x]))&&u(b);if(d.weakImports)for(x=0;x<d.weakImports.length;++x)(b=a(d.weakImports[x])||o.resolvePath(w,d.weakImports[x]))&&u(b,!0)}}catch(P){i(P)}!s&&!f&&i(null,o)}function u(w,h){if(!(o.files.indexOf(w)>-1)){if(o.files.push(w),w in pn){s?c(w,pn[w]):(++f,setTimeout(function(){--f,c(w,pn[w])}));return}if(s){var d;try{d=Et.fs.readFileSync(w).toString("utf8")}catch(b){h||i(b);return}c(w,d)}else++f,o.fetch(w,function(b,x){if(--f,!!n){if(b){h?f||i(null,o):i(b);return}c(w,x)}})}}var f=0;Et.isString(e)&&(e=[e]);for(var l=0,y;l<e.length;++l)(y=o.resolvePath("",e[l]))&&u(y);if(s)return o;f||i(null,o)};ge.prototype.loadSync=function(e,r){if(!Et.isNode)throw Error("not supported");return this.load(e,r,hm)};ge.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Lo.prototype.resolveAll.call(this)};var Fo=/^[A-Z]/;function lm(t,e){var r=e.parent.lookup(e.extend);if(r){var n=new pa(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.declaringField=e,e.extensionField=n,r.add(n),!0}return!1}ge.prototype._handleAdd=function(e){if(e instanceof pa)e.extend!==void 0&&!e.extensionField&&(lm(this,e)||this.deferred.push(e));else if(e instanceof dm)Fo.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof x1)){if(e instanceof pm)for(var r=0;r<this.deferred.length;)lm(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);Fo.test(e.name)&&(e.parent[e.name]=e)}};ge.prototype._handleRemove=function(e){if(e instanceof pa){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var r=this.deferred.indexOf(e);r>-1&&this.deferred.splice(r,1)}}else if(e instanceof dm)Fo.test(e.name)&&delete e.parent[e.name];else if(e instanceof Lo){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);Fo.test(e.name)&&delete e.parent[e.name]}};ge._configure=function(t,e,r){pm=t,da=e,pn=r}});var ne=T((dR,gm)=>{"use strict";var H=gm.exports=Ge(),ym=Ri(),ma,ya;H.codegen=Uh();H.fetch=Fh();H.path=Mh();H.fs=H.inquire("fs");H.toArray=function(e){if(e){for(var r=Object.keys(e),n=new Array(r.length),o=0;o<r.length;)n[o]=e[r[o++]];return n}return[]};H.toObject=function(e){for(var r={},n=0;n<e.length;){var o=e[n++],s=e[n++];s!==void 0&&(r[o]=s)}return r};var S1=/\\/g,E1=/"/g;H.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};H.safeProp=function(e){return!/^[$\w_]+$/.test(e)||H.isReserved(e)?'["'+e.replace(S1,"\\\\").replace(E1,'\\"')+'"]':"."+e};H.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var T1=/_([a-z])/g;H.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(T1,function(r,n){return n.toUpperCase()})};H.compareFieldsById=function(e,r){return e.id-r.id};H.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(H.decorateRoot.remove(e.$type),e.$type.name=r,H.decorateRoot.add(e.$type)),e.$type;ma||(ma=fa());var n=new ma(r||e.name);return H.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var _1=0;H.decorateEnum=function(e){if(e.$type)return e.$type;ya||(ya=Ke());var r=new ya("Enum"+_1++,e);return H.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r};H.setProperty=function(e,r,n){function o(s,i,a){var c=i.shift();if(c==="__proto__")return s;if(i.length>0)s[c]=o(s[c]||{},i,a);else{var u=s[c];u&&(a=[].concat(u).concat(a)),s[c]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!r)throw TypeError("path must be specified");return r=r.split("."),o(e,r,n)};Object.defineProperty(H,"decorateRoot",{get:function(){return ym.decorated||(ym.decorated=new(ha()))}})});var Dt=T((pR,wm)=>{"use strict";wm.exports=we;we.className="ReflectionObject";var jo=ne(),Mo;function we(t,e){if(!jo.isString(t))throw TypeError("name must be a string");if(e&&!jo.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(we.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});we.prototype.toJSON=function(){throw Error()};we.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var r=e.root;r instanceof Mo&&r._handleAdd(this)};we.prototype.onRemove=function(e){var r=e.root;r instanceof Mo&&r._handleRemove(this),this.parent=null,this.resolved=!1};we.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Mo&&(this.resolved=!0),this)};we.prototype.getOption=function(e){if(this.options)return this.options[e]};we.prototype.setOption=function(e,r,n){return(!n||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=r),this};we.prototype.setParsedOption=function(e,r,n){this.parsedOptions||(this.parsedOptions=[]);var o=this.parsedOptions;if(n){var s=o.find(function(c){return Object.prototype.hasOwnProperty.call(c,e)});if(s){var i=s[e];jo.setProperty(i,n,r)}else s={},s[e]=jo.setProperty({},n,r),o.push(s)}else{var a={};a[e]=r,o.push(a)}return this};we.prototype.setOptions=function(e,r){if(e)for(var n=Object.keys(e),o=0;o<n.length;++o)this.setOption(n[o],e[n[o]],r);return this};we.prototype.toString=function(){var e=this.constructor.className,r=this.fullName;return r.length?e+" "+r:e};we._configure=function(t){Mo=t}});var Ke=T((hR,xm)=>{"use strict";xm.exports=Ze;var bm=Dt();((Ze.prototype=Object.create(bm.prototype)).constructor=Ze).className="Enum";var vm=vr(),$o=ne();function Ze(t,e,r,n,o,s){if(bm.call(this,t,r),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=o||{},this.valuesOptions=s,this.reserved=void 0,e)for(var i=Object.keys(e),a=0;a<i.length;++a)typeof e[i[a]]=="number"&&(this.valuesById[this.values[i[a]]=e[i[a]]]=i[a])}Ze.fromJSON=function(e,r){var n=new Ze(e,r.values,r.options,r.comment,r.comments);return n.reserved=r.reserved,n};Ze.prototype.toJSON=function(e){var r=e?Boolean(e.keepComments):!1;return $o.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",r?this.comment:void 0,"comments",r?this.comments:void 0])};Ze.prototype.add=function(e,r,n,o){if(!$o.isString(e))throw TypeError("name must be a string");if(!$o.isInteger(r))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[r]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+r+" in "+this);this.values[e]=r}else this.valuesById[this.values[e]=r]=e;return o&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=o||null),this.comments[e]=n||null,this};Ze.prototype.remove=function(e){if(!$o.isString(e))throw TypeError("name must be a string");var r=this.values[e];if(r==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Ze.prototype.isReservedId=function(e){return vm.isReservedId(this.reserved,e)};Ze.prototype.isReservedName=function(e){return vm.isReservedName(this.reserved,e)}});var la=T((mR,Em)=>{"use strict";Em.exports=P1;var A1=Ke(),ga=gr(),wa=ne();function Sm(t,e,r,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function P1(t){for(var e=wa.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r,n,o=t.fieldsArray.slice().sort(wa.compareFieldsById),r=0;r<o.length;++r){var s=o[r].resolve(),i=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof A1?"int32":s.type,c=ga.basic[a];n="m"+wa.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|ga.mapKey[s.keyType],s.keyType),c===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",i,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|c,a,n),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",n,n),s.packed&&ga.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",a,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),c===void 0?Sm(e,s,i,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|c)>>>0,a,n)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),c===void 0?Sm(e,s,i,n):e("w.uint32(%i).%s(%s)",(s.id<<3|c)>>>0,a,n))}return e("return w")}});var _m=T((yR,Tm)=>{"use strict";var I=Tm.exports=Bi();I.build="light";function O1(t,e,r){return typeof e=="function"?(r=e,e=new I.Root):e||(e=new I.Root),e.load(t,r)}I.load=O1;function C1(t,e){return e||(e=new I.Root),e.loadSync(t)}I.loadSync=C1;I.encoder=la();I.decoder=Zi();I.verifier=ra();I.converter=sa();I.ReflectionObject=Dt();I.Namespace=vr();I.Root=ha();I.Enum=Ke();I.Type=fa();I.Field=Ut();I.OneOf=cn();I.MapField=Wi();I.Service=Yi();I.Method=Ki();I.Message=Bo();I.wrappers=ia();I.types=gr();I.util=ne();I.ReflectionObject._configure(I.Root);I.Namespace._configure(I.Type,I.Service,I.Enum);I.Root._configure(I.Type);I.Field._configure(I.Type)});var Pm=T((gR,Am)=>{"use strict";Am.exports=_m()});var xa=T((hn,va)=>{(function(t,e){if(typeof hn=="object"&&typeof va=="object")va.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var r=e();for(var n in r)(typeof hn=="object"?hn:t)[n]=r[n]}})(hn,function(){return t={418:function(r,n){(function(o,s){for(var i in s)o[i]=s[i]})(n,function(o){var s={};function i(a){if(s[a])return s[a].exports;var c=s[a]={i:a,l:!1,exports:{}};return o[a].call(c.exports,c,c.exports,i),c.l=!0,c.exports}return i.m=o,i.c=s,i.i=function(a){return a},i.d=function(a,c,u){i.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:u})},i.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(c,"a",c),c},i.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},i.p="",i(i.s=1)}([function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(3),c=function(){function u(f,l){f===void 0&&(f={}),l===void 0&&(l={splitValues:!1});var y,w=this;this.headersMap={},f&&(typeof Headers<"u"&&f instanceof Headers?a.getHeaderKeys(f).forEach(function(h){a.getHeaderValues(f,h).forEach(function(d){l.splitValues?w.append(h,a.splitHeaderValue(d)):w.append(h,d)})}):typeof(y=f)=="object"&&typeof y.headersMap=="object"&&typeof y.forEach=="function"?f.forEach(function(h,d){w.append(h,d)}):typeof Map<"u"&&f instanceof Map?f.forEach(function(h,d){w.append(d,h)}):typeof f=="string"?this.appendFromString(f):typeof f=="object"&&Object.getOwnPropertyNames(f).forEach(function(h){var d=f[h];Array.isArray(d)?d.forEach(function(b){w.append(h,b)}):w.append(h,d)}))}return u.prototype.appendFromString=function(f){for(var l=f.split(`\r
`),y=0;y<l.length;y++){var w=l[y],h=w.indexOf(":");if(h>0){var d=w.substring(0,h).trim(),b=w.substring(h+1).trim();this.append(d,b)}}},u.prototype.delete=function(f,l){var y=a.normalizeName(f);if(l===void 0)delete this.headersMap[y];else{var w=this.headersMap[y];if(w){var h=w.indexOf(l);h>=0&&w.splice(h,1),w.length===0&&delete this.headersMap[y]}}},u.prototype.append=function(f,l){var y=this,w=a.normalizeName(f);Array.isArray(this.headersMap[w])||(this.headersMap[w]=[]),Array.isArray(l)?l.forEach(function(h){y.headersMap[w].push(a.normalizeValue(h))}):this.headersMap[w].push(a.normalizeValue(l))},u.prototype.set=function(f,l){var y=a.normalizeName(f);if(Array.isArray(l)){var w=[];l.forEach(function(h){w.push(a.normalizeValue(h))}),this.headersMap[y]=w}else this.headersMap[y]=[a.normalizeValue(l)]},u.prototype.has=function(f,l){var y=this.headersMap[a.normalizeName(f)];if(!Array.isArray(y))return!1;if(l!==void 0){var w=a.normalizeValue(l);return y.indexOf(w)>=0}return!0},u.prototype.get=function(f){var l=this.headersMap[a.normalizeName(f)];return l!==void 0?l.concat():[]},u.prototype.forEach=function(f){var l=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(y){f(y,l.headersMap[y])},this)},u.prototype.toHeaders=function(){if(typeof Headers<"u"){var f=new Headers;return this.forEach(function(l,y){y.forEach(function(w){f.append(l,w)})}),f}throw new Error("Headers class is not defined")},u}();s.BrowserHeaders=c},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(0);s.BrowserHeaders=a.BrowserHeaders},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.iterateHeaders=function(a,c){for(var u=a[Symbol.iterator](),f=u.next();!f.done;)c(f.value[0]),f=u.next()},s.iterateHeadersKeys=function(a,c){for(var u=a.keys(),f=u.next();!f.done;)c(f.value),f=u.next()}},function(o,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i(2);s.normalizeName=function(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()},s.normalizeValue=function(c){return typeof c!="string"&&(c=String(c)),c},s.getHeaderValues=function(c,u){var f=c;if(f instanceof Headers&&f.getAll)return f.getAll(u);var l=f.get(u);return l&&typeof l=="string"?[l]:l},s.getHeaderKeys=function(c){var u=c,f={},l=[];return u.keys?a.iterateHeadersKeys(u,function(y){f[y]||(f[y]=!0,l.push(y))}):u.forEach?u.forEach(function(y,w){f[w]||(f[w]=!0,l.push(w))}):a.iterateHeaders(u,function(y){var w=y[0];f[w]||(f[w]=!0,l.push(w))}),l},s.splitHeaderValue=function(c){var u=[];return c.split(", ").forEach(function(f){f.split(",").forEach(function(l){u.push(l)})}),u}}]))},617:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ChunkParser=n.ChunkType=n.encodeASCII=n.decodeASCII=void 0;var s,i=o(65);function a(h){return(d=h)===9||d===10||d===13||h>=32&&h<=126;var d}function c(h){for(var d=0;d!==h.length;++d)if(!a(h[d]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(h))}function u(h){return(128&h.getUint8(0))==128}function f(h){return h.getUint32(1,!1)}function l(h,d,b){return h.byteLength-d>=b}function y(h,d,b){if(h.slice)return h.slice(d,b);var x=h.length;b!==void 0&&(x=b);for(var P=new Uint8Array(x-d),F=0,j=d;j<x;j++)P[F++]=h[j];return P}n.decodeASCII=c,n.encodeASCII=function(h){for(var d=new Uint8Array(h.length),b=0;b!==h.length;++b){var x=h.charCodeAt(b);if(!a(x))throw new Error("Metadata contains invalid ASCII");d[b]=x}return d},function(h){h[h.MESSAGE=1]="MESSAGE",h[h.TRAILERS=2]="TRAILERS"}(s=n.ChunkType||(n.ChunkType={}));var w=function(){function h(){this.buffer=null,this.position=0}return h.prototype.parse=function(d,b){if(d.length===0&&b)return[];var x,P=[];if(this.buffer==null)this.buffer=d,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=d,this.position=0;else{var F=this.buffer.byteLength-this.position,j=new Uint8Array(F+d.byteLength),fe=y(this.buffer,this.position);j.set(fe,0);var ce=new Uint8Array(d);j.set(ce,F),this.buffer=j,this.position=0}for(;;){if(!l(this.buffer,this.position,5))return P;var ee=y(this.buffer,this.position,this.position+5),ae=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),$e=f(ae);if(!l(this.buffer,this.position,5+$e))return P;var Aa=y(this.buffer,this.position+5,this.position+5+$e);if(this.position+=5+$e,u(ae))return P.push({chunkType:s.TRAILERS,trailers:(x=Aa,new i.Metadata(c(x)))}),P;P.push({chunkType:s.MESSAGE,data:Aa})}},h}();n.ChunkParser=w},8:function(r,n){"use strict";var o;Object.defineProperty(n,"__esModule",{value:!0}),n.httpStatusToCode=n.Code=void 0,function(s){s[s.OK=0]="OK",s[s.Canceled=1]="Canceled",s[s.Unknown=2]="Unknown",s[s.InvalidArgument=3]="InvalidArgument",s[s.DeadlineExceeded=4]="DeadlineExceeded",s[s.NotFound=5]="NotFound",s[s.AlreadyExists=6]="AlreadyExists",s[s.PermissionDenied=7]="PermissionDenied",s[s.ResourceExhausted=8]="ResourceExhausted",s[s.FailedPrecondition=9]="FailedPrecondition",s[s.Aborted=10]="Aborted",s[s.OutOfRange=11]="OutOfRange",s[s.Unimplemented=12]="Unimplemented",s[s.Internal=13]="Internal",s[s.Unavailable=14]="Unavailable",s[s.DataLoss=15]="DataLoss",s[s.Unauthenticated=16]="Unauthenticated"}(o=n.Code||(n.Code={})),n.httpStatusToCode=function(s){switch(s){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.client=void 0;var s=o(65),i=o(617),a=o(8),c=o(346),u=o(57),f=o(882);n.client=function(w,h){return new l(w,h)};var l=function(){function w(h,d){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new i.ChunkParser,this.methodDefinition=h,this.props=d,this.createTransport()}return w.prototype.createTransport=function(){var h=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,d={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:h,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(d):this.transport=u.makeDefaultTransport(d)},w.prototype.onTransportHeaders=function(h,d){if(this.props.debug&&c.debug("onHeaders",h,d),this.closed)this.props.debug&&c.debug("grpc.onHeaders received after request was closed - ignoring");else if(d!==0){this.responseHeaders=h,this.props.debug&&c.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var b=y(h);this.props.debug&&c.debug("onHeaders.gRPCStatus",b);var x=b&&b>=0?b:a.httpStatusToCode(d);this.props.debug&&c.debug("onHeaders.code",x);var P=h.get("grpc-message")||[];if(this.props.debug&&c.debug("onHeaders.gRPCMessage",P),this.rawOnHeaders(h),x!==a.Code.OK){var F=this.decodeGRPCStatus(P[0]);this.rawOnError(x,F,h)}}},w.prototype.onTransportChunk=function(h){var d=this;if(this.closed)this.props.debug&&c.debug("grpc.onChunk received after request was closed - ignoring");else{var b=[];try{b=this.parser.parse(h)}catch(x){return this.props.debug&&c.debug("onChunk.parsing error",x,x.message),void this.rawOnError(a.Code.Internal,"parsing error: "+x.message)}b.forEach(function(x){if(x.chunkType===i.ChunkType.MESSAGE){var P=d.methodDefinition.responseType.deserializeBinary(x.data);d.rawOnMessage(P)}else x.chunkType===i.ChunkType.TRAILERS&&(d.responseHeaders?(d.responseTrailers=new s.Metadata(x.trailers),d.props.debug&&c.debug("onChunk.trailers",d.responseTrailers)):(d.responseHeaders=new s.Metadata(x.trailers),d.rawOnHeaders(d.responseHeaders)))})}},w.prototype.onTransportEnd=function(){if(this.props.debug&&c.debug("grpc.onEnd"),this.closed)this.props.debug&&c.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var h=y(this.responseTrailers);if(h!==null){var d=this.responseTrailers.get("grpc-message"),b=this.decodeGRPCStatus(d[0]);this.rawOnEnd(h,b,this.responseTrailers)}else this.rawOnError(a.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(a.Code.Unknown,"Response closed without headers");var x=y(this.responseHeaders),P=this.responseHeaders.get("grpc-message");if(this.props.debug&&c.debug("grpc.headers only response ",x,P),x===null)return void this.rawOnEnd(a.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var F=this.decodeGRPCStatus(P[0]);this.rawOnEnd(x,F,this.responseHeaders)}},w.prototype.decodeGRPCStatus=function(h){if(!h)return"";try{return decodeURIComponent(h)}catch{return h}},w.prototype.rawOnEnd=function(h,d,b){var x=this;this.props.debug&&c.debug("rawOnEnd",h,d,b),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(P){if(!x.closed)try{P(h,d,b)}catch(F){setTimeout(function(){throw F},0)}}))},w.prototype.rawOnHeaders=function(h){this.props.debug&&c.debug("rawOnHeaders",h),this.completed||this.onHeadersCallbacks.forEach(function(d){try{d(h)}catch(b){setTimeout(function(){throw b},0)}})},w.prototype.rawOnError=function(h,d,b){var x=this;b===void 0&&(b=new s.Metadata),this.props.debug&&c.debug("rawOnError",h,d),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(P){if(!x.closed)try{P(h,d,b)}catch(F){setTimeout(function(){throw F},0)}}))},w.prototype.rawOnMessage=function(h){var d=this;this.props.debug&&c.debug("rawOnMessage",h.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(b){if(!d.closed)try{b(h)}catch(x){setTimeout(function(){throw x},0)}})},w.prototype.onHeaders=function(h){this.onHeadersCallbacks.push(h)},w.prototype.onMessage=function(h){this.onMessageCallbacks.push(h)},w.prototype.onEnd=function(h){this.onEndCallbacks.push(h)},w.prototype.start=function(h){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var d=new s.Metadata(h||{});d.set("content-type","application/grpc-web+proto"),d.set("x-grpc-web","1"),this.transport.start(d)},w.prototype.send=function(h){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var d=f.frameRequest(h);this.transport.sendMessage(d)},w.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},w.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&c.debug("request.abort aborting request"),this.transport.cancel()},w}();function y(w){var h=w.get("grpc-status")||[];if(h.length>0)try{var d=h[0];return parseInt(d,10)}catch{return null}return null}},346:function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debug=void 0,n.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.grpc=void 0;var s,i=o(418),a=o(57),c=o(229),u=o(540),f=o(210),l=o(859),y=o(8),w=o(938),h=o(35),d=o(934);(s=n.grpc||(n.grpc={})).setDefaultTransport=a.setDefaultTransportFactory,s.CrossBrowserHttpTransport=l.CrossBrowserHttpTransport,s.FetchReadableStreamTransport=c.FetchReadableStreamTransport,s.XhrTransport=f.XhrTransport,s.WebsocketTransport=u.WebsocketTransport,s.Code=y.Code,s.Metadata=i.BrowserHeaders,s.client=function(b,x){return d.client(b,x)},s.invoke=w.invoke,s.unary=h.unary},938:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.invoke=void 0;var s=o(934);n.invoke=function(i,a){if(i.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var c=s.client(i,{host:a.host,transport:a.transport,debug:a.debug});return a.onHeaders&&c.onHeaders(a.onHeaders),a.onMessage&&c.onMessage(a.onMessage),a.onEnd&&c.onEnd(a.onEnd),c.start(a.metadata),c.send(a.request),c.finishSend(),{close:function(){c.close()}}}},65:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var s=o(418);Object.defineProperty(n,"Metadata",{enumerable:!0,get:function(){return s.BrowserHeaders}})},57:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.makeDefaultTransport=n.setDefaultTransportFactory=void 0;var s=o(859),i=function(a){return s.CrossBrowserHttpTransport({withCredentials:!1})(a)};n.setDefaultTransportFactory=function(a){i=a},n.makeDefaultTransport=function(a){return i(a)}},229:function(r,n,o){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(u){for(var f,l=1,y=arguments.length;l<y;l++)for(var w in f=arguments[l])Object.prototype.hasOwnProperty.call(f,w)&&(u[w]=f[w]);return u}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.detectFetchSupport=n.FetchReadableStreamTransport=void 0;var i=o(65),a=o(346);n.FetchReadableStreamTransport=function(u){return function(f){return function(l,y){return l.debug&&a.debug("fetchRequest",l),new c(l,y)}(f,u)}};var c=function(){function u(f,l){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=f,this.init=l}return u.prototype.pump=function(f,l){var y=this;if(this.reader=f,this.cancelled)return this.options.debug&&a.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(w){y.options.debug&&a.debug("Fetch.pump.reader.cancel exception",w)});this.reader.read().then(function(w){if(w.done)return y.options.onEnd(),l;y.options.onChunk(w.value),y.pump(y.reader,l)}).catch(function(w){y.cancelled?y.options.debug&&a.debug("Fetch.catch - request cancelled"):(y.cancelled=!0,y.options.debug&&a.debug("Fetch.catch",w.message),y.options.onEnd(w))})},u.prototype.send=function(f){var l=this;fetch(this.options.url,s(s({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:f,signal:this.controller&&this.controller.signal})).then(function(y){if(l.options.debug&&a.debug("Fetch.response",y),l.options.onHeaders(new i.Metadata(y.headers),y.status),!y.body)return y;l.pump(y.body.getReader(),y)}).catch(function(y){l.cancelled?l.options.debug&&a.debug("Fetch.catch - request cancelled"):(l.cancelled=!0,l.options.debug&&a.debug("Fetch.catch",y.message),l.options.onEnd(y))})},u.prototype.sendMessage=function(f){this.send(f)},u.prototype.finishSend=function(){},u.prototype.start=function(f){this.metadata=f},u.prototype.cancel=function(){var f=this;this.cancelled?this.options.debug&&a.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&a.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&a.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&a.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(l){f.options.debug&&a.debug("Fetch.cancel.reader.cancel exception",l)})):this.options.debug&&a.debug("Fetch.cancel before reader"))},u}();n.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CrossBrowserHttpTransport=void 0;var s=o(229),i=o(210);n.CrossBrowserHttpTransport=function(a){if(s.detectFetchSupport()){var c={credentials:a.withCredentials?"include":"same-origin"};return s.FetchReadableStreamTransport(c)}return i.XhrTransport({withCredentials:a.withCredentials})}},210:function(r,n,o){"use strict";var s,i=this&&this.__extends||(s=function(h,d){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&(b[P]=x[P])})(h,d)},function(h,d){function b(){this.constructor=h}s(h,d),h.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)});Object.defineProperty(n,"__esModule",{value:!0}),n.stringToArrayBuffer=n.MozChunkedArrayBufferXHR=n.XHR=n.XhrTransport=void 0;var a=o(65),c=o(346),u=o(849);n.XhrTransport=function(h){return function(d){if(u.detectMozXHRSupport())return new l(d,h);if(u.detectXHROverrideMimeTypeSupport())return new f(d,h);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var f=function(){function h(d,b){this.options=d,this.init=b}return h.prototype.onProgressEvent=function(){this.options.debug&&c.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var d=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var b=w(d);this.options.onChunk(b)},h.prototype.onLoadEvent=function(){this.options.debug&&c.debug("XHR.onLoadEvent"),this.options.onEnd()},h.prototype.onStateChange=function(){this.options.debug&&c.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new a.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},h.prototype.sendMessage=function(d){this.xhr.send(d)},h.prototype.finishSend=function(){},h.prototype.start=function(d){var b=this;this.metadata=d;var x=new XMLHttpRequest;this.xhr=x,x.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(P,F){x.setRequestHeader(P,F.join(", "))}),x.withCredentials=Boolean(this.init.withCredentials),x.addEventListener("readystatechange",this.onStateChange.bind(this)),x.addEventListener("progress",this.onProgressEvent.bind(this)),x.addEventListener("loadend",this.onLoadEvent.bind(this)),x.addEventListener("error",function(P){b.options.debug&&c.debug("XHR.error",P),b.options.onEnd(P.error)})},h.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},h.prototype.cancel=function(){this.options.debug&&c.debug("XHR.abort"),this.xhr.abort()},h}();n.XHR=f;var l=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return i(d,h),d.prototype.configureXhr=function(){this.options.debug&&c.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},d.prototype.onProgressEvent=function(){var b=this.xhr.response;this.options.debug&&c.debug("MozXHR.onProgressEvent: ",new Uint8Array(b)),this.options.onChunk(new Uint8Array(b))},d}(f);function y(h,d){var b=h.charCodeAt(d);if(b>=55296&&b<=56319){var x=h.charCodeAt(d+1);x>=56320&&x<=57343&&(b=65536+(b-55296<<10)+(x-56320))}return b}function w(h){for(var d=new Uint8Array(h.length),b=0,x=0;x<h.length;x++){var P=String.prototype.codePointAt?h.codePointAt(x):y(h,x);d[b++]=255&P}return d}n.MozChunkedArrayBufferXHR=l,n.stringToArrayBuffer=w},849:function(r,n){"use strict";var o;function s(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function i(a){var c=s();if(!c)return!1;try{return c.responseType=a,c.responseType===a}catch{}return!1}Object.defineProperty(n,"__esModule",{value:!0}),n.detectXHROverrideMimeTypeSupport=n.detectMozXHRSupport=n.xhrSupportsResponseType=void 0,n.xhrSupportsResponseType=i,n.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&i("moz-chunked-arraybuffer")},n.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.WebsocketTransport=void 0;var s,i=o(346),a=o(617);(function(u){u[u.FINISH_SEND=1]="FINISH_SEND"})(s||(s={}));var c=new Uint8Array([1]);n.WebsocketTransport=function(){return function(u){return function(f){f.debug&&i.debug("websocketRequest",f);var l,y=function(d){if(d.substr(0,8)==="https://")return"wss://"+d.substr(8);if(d.substr(0,7)==="http://")return"ws://"+d.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(f.url),w=[];function h(d){if(d===s.FINISH_SEND)l.send(c);else{var b=d,x=new Int8Array(b.byteLength+1);x.set(new Uint8Array([0])),x.set(b,1),l.send(x)}}return{sendMessage:function(d){l&&l.readyState!==l.CONNECTING?h(d):w.push(d)},finishSend:function(){l&&l.readyState!==l.CONNECTING?h(s.FINISH_SEND):w.push(s.FINISH_SEND)},start:function(d){(l=new WebSocket(y,["grpc-websockets"])).binaryType="arraybuffer",l.onopen=function(){var b;f.debug&&i.debug("websocketRequest.onopen"),l.send((b="",d.forEach(function(x,P){b+=x+": "+P.join(", ")+`\r
`}),a.encodeASCII(b))),w.forEach(function(x){h(x)})},l.onclose=function(b){f.debug&&i.debug("websocketRequest.onclose",b),f.onEnd()},l.onerror=function(b){f.debug&&i.debug("websocketRequest.onerror",b)},l.onmessage=function(b){f.onChunk(new Uint8Array(b.data))}},cancel:function(){f.debug&&i.debug("websocket.abort"),l.close()}}}(u)}}},35:function(r,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unary=void 0;var s=o(65),i=o(934);n.unary=function(a,c){if(a.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(a.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var u=null,f=null,l=i.client(a,{host:c.host,transport:c.transport,debug:c.debug});return l.onHeaders(function(y){u=y}),l.onMessage(function(y){f=y}),l.onEnd(function(y,w,h){c.onEnd({status:y,statusMessage:w,headers:u||new s.Metadata,message:f,trailers:h})}),l.start(c.metadata),l.send(c.request),l.finishSend(),{close:function(){l.close()}}}},882:function(r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.frameRequest=void 0,n.frameRequest=function(o){var s=o.serializeBinary(),i=new ArrayBuffer(s.byteLength+5);return new DataView(i,1,4).setUint32(0,s.length,!1),new Uint8Array(i,5).set(s),new Uint8Array(i)}}},e={},function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(607);var t,e})});var Ym=T((AR,Vo)=>{var Im,Nm,Rm,Bm,Um,Dm,Fm,Lm,jm,zo,Ea,Mm,$m,qm,Er,zm,Hm,Vm,Jm,Gm,Wm,Xm,Km,Qm,Ho;(function(t){var e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Vo=="object"&&typeof Vo.exports=="object"?t(r(e,r(Vo.exports))):t(r(e));function r(n,o){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,i){return n[s]=o?o(s,i):i}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])};Im=function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(n,o);function s(){this.constructor=n}n.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)},Nm=Object.assign||function(n){for(var o,s=1,i=arguments.length;s<i;s++){o=arguments[s];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},Rm=function(n,o){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)o.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(s[i[a]]=n[i[a]]);return s},Bm=function(n,o,s,i){var a=arguments.length,c=a<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,s):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,o,s,i);else for(var f=n.length-1;f>=0;f--)(u=n[f])&&(c=(a<3?u(c):a>3?u(o,s,c):u(o,s))||c);return a>3&&c&&Object.defineProperty(o,s,c),c},Um=function(n,o){return function(s,i){o(s,i,n)}},Dm=function(n,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,o)},Fm=function(n,o,s,i){function a(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function f(w){try{y(i.next(w))}catch(h){u(h)}}function l(w){try{y(i.throw(w))}catch(h){u(h)}}function y(w){w.done?c(w.value):a(w.value).then(f,l)}y((i=i.apply(n,o||[])).next())})},Lm=function(n,o){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(y){return function(w){return l([y,w])}}function l(y){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,a=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){s.label=y[1];break}if(y[0]===6&&s.label<c[1]){s.label=c[1],c=y;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(y);break}c[2]&&s.ops.pop(),s.trys.pop();continue}y=o.call(n,s)}catch(w){y=[6,w],a=0}finally{i=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},jm=function(n,o){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&Ho(o,n,s)},Ho=Object.create?function(n,o,s,i){i===void 0&&(i=s);var a=Object.getOwnPropertyDescriptor(o,s);(!a||("get"in a?!o.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(n,i,a)}:function(n,o,s,i){i===void 0&&(i=s),n[i]=o[s]},zo=function(n){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&n[o],i=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},Ea=function(n,o){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var i=s.call(n),a,c=[],u;try{for(;(o===void 0||o-- >0)&&!(a=i.next()).done;)c.push(a.value)}catch(f){u={error:f}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(u)throw u.error}}return c},Mm=function(){for(var n=[],o=0;o<arguments.length;o++)n=n.concat(Ea(arguments[o]));return n},$m=function(){for(var n=0,o=0,s=arguments.length;o<s;o++)n+=arguments[o].length;for(var i=Array(n),a=0,o=0;o<s;o++)for(var c=arguments[o],u=0,f=c.length;u<f;u++,a++)i[a]=c[u];return i},qm=function(n,o,s){if(s||arguments.length===2)for(var i=0,a=o.length,c;i<a;i++)(c||!(i in o))&&(c||(c=Array.prototype.slice.call(o,0,i)),c[i]=o[i]);return n.concat(c||Array.prototype.slice.call(o))},Er=function(n){return this instanceof Er?(this.v=n,this):new Er(n)},zm=function(n,o,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(n,o||[]),a,c=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(d){i[d]&&(a[d]=function(b){return new Promise(function(x,P){c.push([d,b,x,P])>1||f(d,b)})})}function f(d,b){try{l(i[d](b))}catch(x){h(c[0][3],x)}}function l(d){d.value instanceof Er?Promise.resolve(d.value.v).then(y,w):h(c[0][2],d)}function y(d){f("next",d)}function w(d){f("throw",d)}function h(d,b){d(b),c.shift(),c.length&&f(c[0][0],c[0][1])}},Hm=function(n){var o,s;return o={},i("next"),i("throw",function(a){throw a}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(a,c){o[a]=n[a]?function(u){return(s=!s)?{value:Er(n[a](u)),done:a==="return"}:c?c(u):u}:c}},Vm=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n[Symbol.asyncIterator],s;return o?o.call(n):(n=typeof zo=="function"?zo(n):n[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(c){s[c]=n[c]&&function(u){return new Promise(function(f,l){u=n[c](u),a(f,l,u.done,u.value)})}}function a(c,u,f,l){Promise.resolve(l).then(function(y){c({value:y,done:f})},u)}},Jm=function(n,o){return Object.defineProperty?Object.defineProperty(n,"raw",{value:o}):n.raw=o,n};var r=Object.create?function(n,o){Object.defineProperty(n,"default",{enumerable:!0,value:o})}:function(n,o){n.default=o};Gm=function(n){if(n&&n.__esModule)return n;var o={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ho(o,n,s);return r(o,n),o},Wm=function(n){return n&&n.__esModule?n:{default:n}},Xm=function(n,o,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?n!==o||!i:!o.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(n):i?i.value:o.get(n)},Km=function(n,o,s,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?n!==o||!a:!o.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(n,s):a?a.value=s:o.set(n,s),s},Qm=function(n,o){if(o===null||typeof o!="object"&&typeof o!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?o===n:n.has(o)},t("__extends",Im),t("__assign",Nm),t("__rest",Rm),t("__decorate",Bm),t("__param",Um),t("__metadata",Dm),t("__awaiter",Fm),t("__generator",Lm),t("__exportStar",jm),t("__createBinding",Ho),t("__values",zo),t("__read",Ea),t("__spread",Mm),t("__spreadArrays",$m),t("__spreadArray",qm),t("__await",Er),t("__asyncGenerator",zm),t("__asyncDelegator",Hm),t("__asyncValues",Vm),t("__makeTemplateObject",Jm),t("__importStar",Gm),t("__importDefault",Wm),t("__classPrivateFieldGet",Xm),t("__classPrivateFieldSet",Km),t("__classPrivateFieldIn",Qm)})});var uy=T((m5,cy)=>{"use strict";cy.exports=function(){return Date.now()}});var ly=T((y5,fy)=>{"use strict";var Go=uy(),Ta=class{constructor(e,r,n){let o=this;this._started=Go(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(Go()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=Go();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=Go(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function U1(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new Ta(arguments[0],arguments[1],t)}fy.exports=U1});var hy=T((g5,py)=>{"use strict";var{AbortController:D1}=globalThis,dy=ly(),mn=class extends D1{constructor(e){super(),this._ms=e,this._timer=dy(()=>this.abort(),e),Object.setPrototypeOf(this,mn.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=dy(()=>this.abort(),this._ms)}};py.exports={TimeoutController:mn}});var H1={};K(H1,{create:()=>z1});var Ny=t=>Promise.reject(new Error(`No base found for "${t}"`)),gn=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||Ny;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var Ry=t=>Promise.reject(new Error(`No codec found for "${t}"`)),wn=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||Ry;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];let n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var By=t=>Promise.reject(new Error(`No hasher found for "${t}"`)),bn=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||By;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];let n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var cs={};K(cs,{code:()=>kg,createLink:()=>Ka,createNode:()=>Xa,decode:()=>Ng,encode:()=>Ig,name:()=>Cg,prepare:()=>is,validate:()=>as});var Uy=Ia,Ca=128,Dy=127,Fy=~Dy,Ly=Math.pow(2,31);function Ia(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ly;)e[r++]=t&255|Ca,t/=128;for(;t&Fy;)e[r++]=t&255|Ca,t>>>=7;return e[r]=t|0,Ia.bytes=r-n+1,e}var jy=Ko,My=128,ka=127;function Ko(t,n){var r=0,n=n||0,o=0,s=n,i,a=t.length;do{if(s>=a)throw Ko.bytes=0,new RangeError("Could not decode varint");i=t[s++],r+=o<28?(i&ka)<<o:(i&ka)*Math.pow(2,o),o+=7}while(i>=My);return Ko.bytes=s-n,r}var $y=Math.pow(2,7),qy=Math.pow(2,14),zy=Math.pow(2,21),Hy=Math.pow(2,28),Vy=Math.pow(2,35),Jy=Math.pow(2,42),Gy=Math.pow(2,49),Wy=Math.pow(2,56),Xy=Math.pow(2,63),Ky=function(t){return t<$y?1:t<qy?2:t<zy?3:t<Hy?4:t<Vy?5:t<Jy?6:t<Gy?7:t<Wy?8:t<Xy?9:10},Qy={encode:Uy,decode:jy,encodingLength:Ky},Yy=Qy,Pr=Yy;var Or=(t,e=0)=>[Pr.decode(t,e),Pr.decode.bytes],jt=(t,e,r=0)=>(Pr.encode(t,e,r),e),Mt=t=>Pr.encodingLength(t);var Q1=new Uint8Array(0);var Na=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Ie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Ra=t=>new TextEncoder().encode(t),Ba=t=>new TextDecoder().decode(t);var pt=(t,e)=>{let r=e.byteLength,n=Mt(t),o=n+Mt(r),s=new Uint8Array(o+r);return jt(t,s,0),jt(r,s,n),s.set(e,o),new $t(t,r,e,s)},_t=t=>{let e=Ie(t),[r,n]=Or(e),[o,s]=Or(e.subarray(n)),i=e.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new $t(r,o,i,e)},Da=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Na(t.bytes,r.bytes)}},$t=class{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}};var ts={};K(ts,{base58btc:()=>Q,base58flickr:()=>og});function Zy(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var s=t.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var d=0,b=0,x=0,P=h.length;x!==P&&h[x]===0;)x++,d++;for(var F=(P-x)*f+1>>>0,j=new Uint8Array(F);x!==P;){for(var fe=h[x],ce=0,ee=F-1;(fe!==0||ce<b)&&ee!==-1;ee--,ce++)fe+=256*j[ee]>>>0,j[ee]=fe%a>>>0,fe=fe/a>>>0;if(fe!==0)throw new Error("Non-zero carry");b=ce,x++}for(var ae=F-b;ae!==F&&j[ae]===0;)ae++;for(var $e=c.repeat(d);ae<F;++ae)$e+=t.charAt(j[ae]);return $e}function y(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var d=0;if(h[d]!==" "){for(var b=0,x=0;h[d]===c;)b++,d++;for(var P=(h.length-d)*u+1>>>0,F=new Uint8Array(P);h[d];){var j=r[h.charCodeAt(d)];if(j===255)return;for(var fe=0,ce=P-1;(j!==0||fe<x)&&ce!==-1;ce--,fe++)j+=a*F[ce]>>>0,F[ce]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");x=fe,d++}if(h[d]!==" "){for(var ee=P-x;ee!==P&&F[ee]===0;)ee++;for(var ae=new Uint8Array(b+(P-ee)),$e=b;ee!==P;)ae[$e++]=F[ee++];return ae}}}function w(h){var d=y(h);if(d)return d;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:y,decode:w}}var eg=Zy,tg=eg,Fa=tg;var Qo=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Yo=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return La(this,e)}},Zo=class{constructor(e){this.decoders=e}or(e){return La(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},La=(t,e)=>new Zo({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),es=class{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Qo(e,r,n),this.decoder=new Yo(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},qt=({name:t,prefix:e,encode:r,decode:n})=>new es(t,e,r,n),ht=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:o}=Fa(r,e);return qt({prefix:t,name:e,encode:n,decode:s=>Ie(o(s))})},rg=(t,e,r,n)=>{let o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=o[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i},ng=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],i+=8;i>r;)i-=r,s+=e[o&a>>i];if(i&&(s+=e[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},$=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>qt({prefix:e,name:t,encode(o){return ng(o,n,r)},decode(o){return rg(o,n,r,t)}});var Q=ht({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),og=ht({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rs={};K(rs,{base32:()=>Ne,base32hex:()=>cg,base32hexpad:()=>fg,base32hexpadupper:()=>lg,base32hexupper:()=>ug,base32pad:()=>ig,base32padupper:()=>ag,base32upper:()=>sg,base32z:()=>dg});var Ne=$({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sg=$({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ig=$({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ag=$({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cg=$({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ug=$({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fg=$({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lg=$({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dg=$({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pg=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return mg(r,ns(t),e||Q.encoder);default:return yg(r,ns(t),e||Ne.encoder)}},ja=new WeakMap,ns=t=>{let e=ja.get(t);if(e==null){let r=new Map;return ja.set(t,r),r}return e},v=class{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Cr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==gg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return v.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=pt(e,r);return v.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return v.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&Da(e.multihash,n.multihash)}toString(e){return pg(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof v)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new v(n,o,s,i||Ma(n,o,s.bytes))}else if(r[wg]===!0){let{version:n,multihash:o,code:s}=r,i=_t(o);return v.create(n,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Cr)throw new Error(`Version 0 CID must use dag-pb (code: ${Cr}) block encoding`);return new v(e,r,n,n.bytes)}case 1:{let o=Ma(e,r,n.bytes);return new v(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return v.create(0,Cr,e)}static createV1(e,r){return v.create(1,e,r)}static decode(e){let[r,n]=v.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=v.inspectBytes(e),n=r.size-r.multihashSize,o=Ie(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new $t(r.multihashCode,r.digestSize,s,o);return[r.version===0?v.createV0(i):v.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,y]=Or(e.subarray(r));return r+=y,l},o=n(),s=Cr;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,o]=hg(e,r),s=v.decode(o);return ns(s).set(n,e),s}},hg=(t,e)=>{switch(t[0]){case"Q":{let r=e||Q;return[Q.prefix,r.decode(`${Q.prefix}${t}`)]}case Q.prefix:{let r=e||Q;return[Q.prefix,r.decode(t)]}case Ne.prefix:{let r=e||Ne;return[Ne.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},mg=(t,e,r)=>{let{prefix:n}=r;if(n!==Q.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o},yg=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o},Cr=112,gg=18,Ma=(t,e,r)=>{let n=Mt(t),o=n+Mt(e),s=new Uint8Array(o+r.byteLength);return jt(t,s,0),jt(e,s,n),s.set(r,o),s},wg=Symbol.for("@ipld/js-cid/CID");var bg=new TextDecoder;function os(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let o=t[e++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,e]}function xn(t,e){let r;[r,e]=os(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function $a(t,e){let r;return[r,e]=os(t,e),[r&7,r>>3,e]}function vg(t){let e={},r=t.length,n=0;for(;n<r;){let o,s;if([o,s,n]=$a(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=xn(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=xn(t,n),e.Name=bg.decode(i)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=os(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function qa(t){let e=t.length,r=0,n,o=!1,s;for(;r<e;){let a,c;if([a,c,r]=$a(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=xn(t,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=xn(t,r),n.push(vg(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var Ha=new TextEncoder,za=2**32,xg=2**31;function Sg(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=kr(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let n=Ha.encode(t.Name);r-=n.length,e.set(n,r),r=kr(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=kr(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Va(t){let e=Tg(t),r=new Uint8Array(e),n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=kr(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){let s=Sg(t.Links[o],r.subarray(0,n));n-=s,n=kr(r,n,s)-1,r[n]=18}return r}function Eg(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+zt(r)}if(typeof t.Name=="string"){let r=Ha.encode(t.Name).length;e+=1+r+zt(r)}return typeof t.Tsize=="number"&&(e+=1+zt(t.Tsize)),e}function Tg(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+zt(r)}if(t.Links)for(let r of t.Links){let n=Eg(r);e+=1+n+zt(n)}return e}function kr(t,e,r){e-=zt(r);let n=e;for(;r>=xg;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function zt(t){return t%2===0&&t++,Math.floor((_g(t)+6)/7)}function _g(t){let e=0;return t>=za&&(t=Math.floor(t/za),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+Ag[t]}var Ag=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var Pg=["Data","Links"],Og=["Hash","Name","Tsize"],ss=new TextEncoder;function Ga(t,e){if(t===e)return 0;let r=t.Name?ss.encode(t.Name):[],n=e.Name?ss.encode(e.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function Ja(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function Wa(t){if(typeof t.asCID=="object"){let r=v.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=v.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=v.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=v.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function is(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=ss.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(Wa),e.Links.sort(Ga);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function as(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!Ja(t,Pg))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Ja(r,Og))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&Ga(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Xa(t,e=[]){return is({Data:t,Links:e})}function Ka(t,e,r){return Wa({Hash:r,Name:t,Tsize:e})}var Cg="dag-pb",kg=112;function Ig(t){as(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),Va(e)}function Ng(t){let e=qa(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let o={};try{o.Hash=v.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var Rn={};K(Rn,{code:()=>pw,decode:()=>bs,encode:()=>ws,name:()=>dw});var Rg=["string","number","bigint","symbol"],Bg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Qa(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(Rg.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Ug(t))return"Buffer";let r=Dg(t);return r||"Object"}function Ug(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Dg(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(Bg.includes(e))return e}var g=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);var S=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Ht=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Fg=new TextDecoder,Lg=new TextEncoder;function Sn(t){return Ht&&globalThis.Buffer.isBuffer(t)}function Ir(t){return t instanceof Uint8Array?Sn(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var tc=Ht?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Za(t,e,r):(t,e,r)=>r-e>64?Fg.decode(t.subarray(e,r)):Za(t,e,r),En=Ht?t=>t.length>64?globalThis.Buffer.from(t):Ya(t):t=>t.length>64?Lg.encode(t):Ya(t),qe=t=>Uint8Array.from(t),Vt=Ht?(t,e,r)=>Sn(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),rc=Ht?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Ir(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},nc=Ht?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function oc(t,e){if(Sn(t)&&Sn(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Ya(t,e=1/0){let r,n=t.length,o=null,s=[];for(let i=0;i<n;++i){if(r=t.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Za(t,e,r){let n=[];for(;e<r;){let o=t[e],s=null,i=o>239?4:o>223?3:o>191?2:1;if(e+i<=r){let a,c,u,f;switch(i){case 1:o<128&&(s=o);break;case 2:a=t[e+1],(a&192)===128&&(f=(o&31)<<6|a&63,f>127&&(s=f));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(f=(o&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(f=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=i}return us(n)}var ec=4096;function us(t){let e=t.length;if(e<=ec)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ec));return r}var jg=256,Nr=class{constructor(e=jg){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=nc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Vt(n,0,this.cursor)}else r=rc(this.chunks,this.cursor);return e&&this.reset(),r}};var _="CBOR decode error:",et="CBOR encode error:",Rr=[];Rr[23]=1;Rr[24]=2;Rr[25]=3;Rr[26]=5;Rr[27]=9;function tt(t,e,r){if(t.length-e<r)throw new Error(`${_} not enough data for type`)}var Y=[24,256,65536,4294967296,BigInt("18446744073709551616")];function le(t,e,r){tt(t,e,1);let n=t[e];if(r.strict===!0&&n<Y[0])throw new Error(`${_} integer encoded in more bytes than necessary (strict decode)`);return n}function de(t,e,r){tt(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Y[1])throw new Error(`${_} integer encoded in more bytes than necessary (strict decode)`);return n}function pe(t,e,r){tt(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Y[2])throw new Error(`${_} integer encoded in more bytes than necessary (strict decode)`);return n}function he(t,e,r){tt(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<Y[3])throw new Error(`${_} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${_} integers outside of the safe integer range are not supported`)}function sc(t,e,r,n){return new S(g.uint,le(t,e+1,n),2)}function ic(t,e,r,n){return new S(g.uint,de(t,e+1,n),3)}function ac(t,e,r,n){return new S(g.uint,pe(t,e+1,n),5)}function cc(t,e,r,n){return new S(g.uint,he(t,e+1,n),9)}function be(t,e){return te(t,0,e.value)}function te(t,e,r){if(r<Y[0]){let n=Number(r);t.push([e|n])}else if(r<Y[1]){let n=Number(r);t.push([e|24,n])}else if(r<Y[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Y[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Y[4]){let o=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,t.push(o)}else throw new Error(`${_} encountered BigInt larger than allowable range`)}}be.encodedSize=function(e){return te.encodedSize(e.value)};te.encodedSize=function(e){return e<Y[0]?1:e<Y[1]?2:e<Y[2]?3:e<Y[3]?5:9};be.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function uc(t,e,r,n){return new S(g.negint,-1-le(t,e+1,n),2)}function fc(t,e,r,n){return new S(g.negint,-1-de(t,e+1,n),3)}function lc(t,e,r,n){return new S(g.negint,-1-pe(t,e+1,n),5)}var fs=BigInt(-1),dc=BigInt(1);function pc(t,e,r,n){let o=he(t,e+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new S(g.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${_} integers outside of the safe integer range are not supported`);return new S(g.negint,fs-BigInt(o),9)}function Tn(t,e){let r=e.value,n=typeof r=="bigint"?r*fs-dc:r*-1-1;te(t,e.type.majorEncoded,n)}Tn.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*fs-dc:r*-1-1;return n<Y[0]?1:n<Y[1]?2:n<Y[2]?3:n<Y[3]?5:9};Tn.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Br(t,e,r,n){tt(t,e,r+n);let o=Vt(t,e+r,e+r+n);return new S(g.bytes,o,r+n)}function hc(t,e,r,n){return Br(t,e,1,r)}function mc(t,e,r,n){return Br(t,e,2,le(t,e+1,n))}function yc(t,e,r,n){return Br(t,e,3,de(t,e+1,n))}function gc(t,e,r,n){return Br(t,e,5,pe(t,e+1,n))}function wc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${_} 64-bit integer bytes lengths not supported`);return Br(t,e,9,o)}function _n(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===g.string?En(t.value):t.value),t.encodedBytes}function Jt(t,e){let r=_n(e);te(t,e.type.majorEncoded,r.length),t.push(r)}Jt.encodedSize=function(e){let r=_n(e);return te.encodedSize(r.length)+r.length};Jt.compareTokens=function(e,r){return $g(_n(e),_n(r))};function $g(t,e){return t.length<e.length?-1:t.length>e.length?1:oc(t,e)}function Ur(t,e,r,n,o){let s=r+n;tt(t,e,s);let i=new S(g.string,tc(t,e+r,e+s),s);return o.retainStringBytes===!0&&(i.byteValue=Vt(t,e+r,e+s)),i}function bc(t,e,r,n){return Ur(t,e,1,r,n)}function vc(t,e,r,n){return Ur(t,e,2,le(t,e+1,n),n)}function xc(t,e,r,n){return Ur(t,e,3,de(t,e+1,n),n)}function Sc(t,e,r,n){return Ur(t,e,5,pe(t,e+1,n),n)}function Ec(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${_} 64-bit integer string lengths not supported`);return Ur(t,e,9,o,n)}var Tc=Jt;function Gt(t,e,r,n){return new S(g.array,n,r)}function _c(t,e,r,n){return Gt(t,e,1,r)}function Ac(t,e,r,n){return Gt(t,e,2,le(t,e+1,n))}function Pc(t,e,r,n){return Gt(t,e,3,de(t,e+1,n))}function Oc(t,e,r,n){return Gt(t,e,5,pe(t,e+1,n))}function Cc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${_} 64-bit integer array lengths not supported`);return Gt(t,e,9,o)}function kc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${_} indefinite length items not allowed`);return Gt(t,e,1,1/0)}function An(t,e){te(t,g.array.majorEncoded,e.value)}An.compareTokens=be.compareTokens;An.encodedSize=function(e){return te.encodedSize(e.value)};function Wt(t,e,r,n){return new S(g.map,n,r)}function Ic(t,e,r,n){return Wt(t,e,1,r)}function Nc(t,e,r,n){return Wt(t,e,2,le(t,e+1,n))}function Rc(t,e,r,n){return Wt(t,e,3,de(t,e+1,n))}function Bc(t,e,r,n){return Wt(t,e,5,pe(t,e+1,n))}function Uc(t,e,r,n){let o=he(t,e+1,n);if(typeof o=="bigint")throw new Error(`${_} 64-bit integer map lengths not supported`);return Wt(t,e,9,o)}function Dc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${_} indefinite length items not allowed`);return Wt(t,e,1,1/0)}function Pn(t,e){te(t,g.map.majorEncoded,e.value)}Pn.compareTokens=be.compareTokens;Pn.encodedSize=function(e){return te.encodedSize(e.value)};function Fc(t,e,r,n){return new S(g.tag,r,1)}function Lc(t,e,r,n){return new S(g.tag,le(t,e+1,n),2)}function jc(t,e,r,n){return new S(g.tag,de(t,e+1,n),3)}function Mc(t,e,r,n){return new S(g.tag,pe(t,e+1,n),5)}function $c(t,e,r,n){return new S(g.tag,he(t,e+1,n),9)}function On(t,e){te(t,g.tag.majorEncoded,e.value)}On.compareTokens=be.compareTokens;On.encodedSize=function(e){return te.encodedSize(e.value)};var Gg=20,Wg=21,Xg=22,Kg=23;function qc(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${_} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new S(g.null,null,1):new S(g.undefined,void 0,1)}function zc(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${_} indefinite length items not allowed`);return new S(g.break,void 0,1)}function ls(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${_} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${_} Infinity values are not supported`)}return new S(g.float,t,e)}function Hc(t,e,r,n){return ls(ds(t,e+1),3,n)}function Vc(t,e,r,n){return ls(ps(t,e+1),5,n)}function Jc(t,e,r,n){return ls(Kc(t,e+1),9,n)}function Cn(t,e,r){let n=e.value;if(n===!1)t.push([g.float.majorEncoded|Gg]);else if(n===!0)t.push([g.float.majorEncoded|Wg]);else if(n===null)t.push([g.float.majorEncoded|Xg]);else if(n===void 0)t.push([g.float.majorEncoded|Kg]);else{let o,s=!1;(!r||r.float64!==!0)&&(Wc(n),o=ds(Re,1),n===o||Number.isNaN(n)?(Re[0]=249,t.push(Re.slice(0,3)),s=!0):(Xc(n),o=ps(Re,1),n===o&&(Re[0]=250,t.push(Re.slice(0,5)),s=!0))),s||(Qg(n),o=Kc(Re,1),Re[0]=251,t.push(Re.slice(0,9)))}}Cn.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Wc(n);let o=ds(Re,1);if(n===o||Number.isNaN(n))return 3;if(Xc(n),o=ps(Re,1),n===o)return 5}return 9};var Gc=new ArrayBuffer(9),ve=new DataView(Gc,1),Re=new Uint8Array(Gc,0);function Wc(t){if(t===1/0)ve.setUint16(0,31744,!1);else if(t===-1/0)ve.setUint16(0,64512,!1);else if(Number.isNaN(t))ve.setUint16(0,32256,!1);else{ve.setFloat32(0,t);let e=ve.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)ve.setUint16(0,31744,!1);else if(r===0)ve.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?ve.setUint16(0,0):o<-14?ve.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):ve.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function ds(t,e){if(t.length-e<2)throw new Error(`${_} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function Xc(t){ve.setFloat32(0,t,!1)}function ps(t,e){if(t.length-e<4)throw new Error(`${_} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Qg(t){ve.setFloat64(0,t,!1)}function Kc(t,e){if(t.length-e<8)throw new Error(`${_} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Cn.compareTokens=be.compareTokens;function B(t,e,r){throw new Error(`${_} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function kn(t){return()=>{throw new Error(`${_} ${t}`)}}var E=[];for(let t=0;t<=23;t++)E[t]=B;E[24]=sc;E[25]=ic;E[26]=ac;E[27]=cc;E[28]=B;E[29]=B;E[30]=B;E[31]=B;for(let t=32;t<=55;t++)E[t]=B;E[56]=uc;E[57]=fc;E[58]=lc;E[59]=pc;E[60]=B;E[61]=B;E[62]=B;E[63]=B;for(let t=64;t<=87;t++)E[t]=hc;E[88]=mc;E[89]=yc;E[90]=gc;E[91]=wc;E[92]=B;E[93]=B;E[94]=B;E[95]=kn("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)E[t]=bc;E[120]=vc;E[121]=xc;E[122]=Sc;E[123]=Ec;E[124]=B;E[125]=B;E[126]=B;E[127]=kn("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)E[t]=_c;E[152]=Ac;E[153]=Pc;E[154]=Oc;E[155]=Cc;E[156]=B;E[157]=B;E[158]=B;E[159]=kc;for(let t=160;t<=183;t++)E[t]=Ic;E[184]=Nc;E[185]=Rc;E[186]=Bc;E[187]=Uc;E[188]=B;E[189]=B;E[190]=B;E[191]=Dc;for(let t=192;t<=215;t++)E[t]=Fc;E[216]=Lc;E[217]=jc;E[218]=Mc;E[219]=$c;E[220]=B;E[221]=B;E[222]=B;E[223]=B;for(let t=224;t<=243;t++)E[t]=kn("simple values are not supported");E[244]=B;E[245]=B;E[246]=B;E[247]=qc;E[248]=kn("simple values are not supported");E[249]=Hc;E[250]=Vc;E[251]=Jc;E[252]=B;E[253]=B;E[254]=B;E[255]=zc;var Be=[];for(let t=0;t<24;t++)Be[t]=new S(g.uint,t,1);for(let t=-1;t>=-24;t--)Be[31-t]=new S(g.negint,t,1);Be[64]=new S(g.bytes,new Uint8Array(0),1);Be[96]=new S(g.string,"",1);Be[128]=new S(g.array,0,1);Be[160]=new S(g.map,0,1);Be[244]=new S(g.false,!1,1);Be[245]=new S(g.true,!0,1);Be[246]=new S(g.null,null,1);function Qc(t){switch(t.type){case g.false:return qe([244]);case g.true:return qe([245]);case g.null:return qe([246]);case g.bytes:return t.value.length?void 0:qe([64]);case g.string:return t.value===""?qe([96]):void 0;case g.array:return t.value===0?qe([128]):void 0;case g.map:return t.value===0?qe([160]):void 0;case g.uint:return t.value<24?qe([Number(t.value)]):void 0;case g.negint:if(t.value>=-24)return qe([31-Number(t.value)])}}var Zg={float64:!1,mapSorter:rw,quickEncodeToken:Qc};function ew(){let t=[];return t[g.uint.major]=be,t[g.negint.major]=Tn,t[g.bytes.major]=Jt,t[g.string.major]=Tc,t[g.array.major]=An,t[g.map.major]=Pn,t[g.tag.major]=On,t[g.float.major]=Cn,t}var Yc=ew(),hs=new Nr,Xt=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${et} object contains circular references`);return new Xt(r,e)}},mt={null:new S(g.null,null),undefined:new S(g.undefined,void 0),true:new S(g.true,!0),false:new S(g.false,!1),emptyArray:new S(g.array,0),emptyMap:new S(g.map,0)},yt={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new S(g.float,t):t>=0?new S(g.uint,t):new S(g.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new S(g.uint,t):new S(g.negint,t)},Uint8Array(t,e,r,n){return new S(g.bytes,t)},string(t,e,r,n){return new S(g.string,t)},boolean(t,e,r,n){return t?mt.true:mt.false},null(t,e,r,n){return mt.null},undefined(t,e,r,n){return mt.undefined},ArrayBuffer(t,e,r,n){return new S(g.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new S(g.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[mt.emptyArray,new S(g.break)]:mt.emptyArray;n=Xt.createCheck(n,t);let o=[],s=0;for(let i of t)o[s++]=In(i,r,n);return r.addBreakTokens?[new S(g.array,t.length),o,new S(g.break)]:[new S(g.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",s=o?t.keys():Object.keys(t),i=o?t.size:s.length;if(!i)return r.addBreakTokens===!0?[mt.emptyMap,new S(g.break)]:mt.emptyMap;n=Xt.createCheck(n,t);let a=[],c=0;for(let u of s)a[c++]=[In(u,r,n),In(o?t.get(u):t[u],r,n)];return tw(a,r),r.addBreakTokens?[new S(g.map,i),a,new S(g.break)]:[new S(g.map,i),a]}};yt.Map=yt.Object;yt.Buffer=yt.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))yt[`${t}Array`]=yt.DataView;function In(t,e={},r){let n=Qa(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||yt[n];if(typeof o=="function"){let i=o(t,n,e,r);if(i!=null)return i}let s=yt[n];if(!s)throw new Error(`${et} unsupported type: ${n}`);return s(t,n,e,r)}function tw(t,e){e.mapSorter&&t.sort(e.mapSorter)}function rw(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=Yc[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Zc(t,e,r,n){if(Array.isArray(e))for(let o of e)Zc(t,o,r,n);else r[e.type.major](t,e,n)}function ms(t,e,r){let n=In(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=e[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new Nr(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Ir(a.chunks[0])}}return hs.reset(),Zc(hs,n,e,r),hs.toBytes(!0)}function ys(t,e){return e=Object.assign({},Zg,e),ms(t,Yc,e)}var nw={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},gs=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Be[e];if(r===void 0){let n=E[e];if(!n)throw new Error(`${_} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},Dr=Symbol.for("DONE"),Nn=Symbol.for("BREAK");function ow(t,e,r){let n=[];for(let o=0;o<t.value;o++){let s=Fr(e,r);if(s===Nn){if(t.value===1/0)break;throw new Error(`${_} got unexpected break to lengthed array`)}if(s===Dr)throw new Error(`${_} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=s}return n}function sw(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<t.value;i++){let a=Fr(e,r);if(a===Nn){if(t.value===1/0)break;throw new Error(`${_} got unexpected break to lengthed map`)}if(a===Dr)throw new Error(`${_} found map but not enough entries (got ${i} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${_} non-string keys not supported (got ${typeof a})`);let c=Fr(e,r);if(c===Dr)throw new Error(`${_} found map but not enough entries (got ${i} [no value], expected ${t.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function Fr(t,e){if(t.done())return Dr;let r=t.next();if(r.type===g.break)return Nn;if(r.type.terminal)return r.value;if(r.type===g.array)return ow(r,t,e);if(r.type===g.map)return sw(r,t,e);if(r.type===g.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Fr(t,e);return e.tags[r.value](n)}throw new Error(`${_} tag not supported (${r.value})`)}throw new Error("unsupported")}function Lr(t,e){if(!(t instanceof Uint8Array))throw new Error(`${_} data to decode must be a Uint8Array`);e=Object.assign({},nw,e);let r=e.tokenizer||new gs(t,e),n=Fr(r,e);if(n===Dr)throw new Error(`${_} did not find any content to decode`);if(n===Nn)throw new Error(`${_} got unexpected break`);if(!r.done())throw new Error(`${_} too many terminals, data makes no sense`);return n}var eu=42;function aw(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=v.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new S(g.tag,eu),new S(g.bytes,r)]}function cw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function uw(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var fw={float64:!0,typeEncoders:{Object:aw,undefined:cw,number:uw}};function lw(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return v.decode(t.subarray(1))}var tu={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};tu.tags[eu]=lw;var dw="dag-cbor",pw=113,ws=t=>ys(t,fw),bs=t=>Lr(t,tu);var Os={};K(Os,{code:()=>Tw,decode:()=>Aw,encode:()=>_w,name:()=>Ew});var xs=({name:t,code:e,encode:r})=>new vs(t,e,r),vs=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?pt(this.code,r):r.then(n=>pt(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ss={};K(Ss,{base64:()=>Kt,base64pad:()=>hw,base64url:()=>gt,base64urlpad:()=>mw});var Kt=$({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hw=$({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gt=$({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mw=$({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Es=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===g.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===g.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[g.uint.major](e,r){this.prefix(e);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);e.push(o)}[g.negint.major](e,r){this[g.uint.major](e,r)}[g.bytes.major](e,r){throw new Error(`${et} unsupported type: Uint8Array`)}[g.string.major](e,r){this.prefix(e);let n=En(JSON.stringify(r.value));e.push(n.length>32?Ir(n):n)}[g.array.major](e,r){this.prefix(e),this.inRecursive.push({type:g.array,elements:0}),e.push([91])}[g.map.major](e,r){this.prefix(e),this.inRecursive.push({type:g.map,elements:0}),e.push([123])}[g.tag.major](e,r){}[g.float.major](e,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===g.array)e.push([93]);else if(i.type===g.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${et} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),e.push(o)}};function yw(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${et} complex map keys are not supported`);let r=t[0],n=e[0];if(r.type!==g.string||n.type!==g.string)throw new Error(`${et} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${et} unexpected duplicate map keys, this is not supported`)}var gw={addBreakTokens:!0,mapSorter:yw};function Ts(t,e){return e=Object.assign({},gw,e),ms(t,new Es,e)}var Qt=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${_} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${_} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new S(g.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${_} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${_} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),i=parseFloat(s);return n?new S(g.float,i,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new S(i>=0?g.uint:g.negint,i,this.pos-e):new S(i>=0?g.uint:g.negint,BigInt(s),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${_} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new S(g.string,c,i)}}let e=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${_} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${_} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${_} unexpected unicode sequence at position ${this.pos}`);let c,u,f,l;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this.pos+1],(c&192)===128&&(l=(s&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this.pos+1],u=this.data[this.pos+2],(c&192)===128&&(u&192)===128&&(l=(s&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this.pos+1],u=this.data[this.pos+2],f=this.data[this.pos+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this.pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${_} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${_} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new S(g.string,us(r),this.pos-e);default:if(s<32)throw new Error(`${_} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):o()}}throw new Error(`${_} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new S(g.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new S(g.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new S(g.null,null,4);case 102:return this.expect([102,97,108,115,101]),new S(g.false,!1,5);case 116:return this.expect([116,114,117,101]),new S(g.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${_} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new S(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${_} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new S(g.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new S(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${_} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new S(g.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${_} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${_} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function _s(t,e){return e=Object.assign({tokenizer:new Qt(t,e)},e),Lr(t,e)}function bw(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;let e=v.asCID(t);if(!e)return null;let r=e.toString();return[new S(g.map,1/0,1),new S(g.string,"/",1),new S(g.string,r,r.length),new S(g.break,void 0,1)]}function nu(t){let e=Kt.encode(t).slice(1);return[new S(g.map,1/0,1),new S(g.string,"/",1),new S(g.map,1/0,1),new S(g.string,"bytes",5),new S(g.string,e,e.length),new S(g.break,void 0,1),new S(g.break,void 0,1)]}function vw(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function xw(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Sw={typeEncoders:{Object:bw,Uint8Array:nu,Buffer:nu,undefined:vw,number:xw}},As=class extends Qt{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===g.map){let r=this._next();if(r.type===g.string&&r.value==="/"){let n=this._next();if(n.type===g.string){if(this._next().type!==g.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new S(g.tag,42,0)}if(n.type===g.map){let o=this._next();if(o.type===g.string&&o.value==="bytes"){let s=this._next();if(s.type===g.string){for(let a=0;a<2;a++)if(this._next().type!==g.break)throw new Error("Invalid encoded Bytes form");let i=Kt.decode(`m${s.value}`);return new S(g.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}},Ps={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ps.tags[42]=v.parse;var Ew="dag-json",Tw=297,_w=t=>Ts(t,Sw),Aw=t=>{let e=Object.assign(Ps,{tokenizer:new As(t,Ps)});return _s(t,e)};var Cs={};K(Cs,{code:()=>Bw,decode:()=>Lw,encode:()=>Fw,name:()=>Rw,toGeneral:()=>du});function Ue(t){return gt.encode(t).slice(1)}function xe(t){return gt.decode(`u${t}`)}function ou(t){let[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:v.decode(xe(r))}}function Pw(t){let e={signature:xe(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=xe(t.protected)),e}function su(t){let e=xe(t.payload);try{v.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(Pw)}}function Ow(t){let e={signature:Ue(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Ue(t.protected)),e}function iu(t){let e={payload:Ue(t.payload),signatures:t.signatures.map(Ow)};return e.link=v.decode(new Uint8Array(t.payload)),e}function au(t){let[e,r,n,o,s]=t,i={ciphertext:o,iv:n,protected:e,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function kw(t){let e={};return t.encrypted_key&&(e.encrypted_key=xe(t.encrypted_key)),t.header&&(e.header=t.header),e}function cu(t){let e={ciphertext:xe(t.ciphertext),protected:xe(t.protected),iv:xe(t.iv),tag:xe(t.tag)};return t.aad&&(e.aad=xe(t.aad)),t.recipients&&(e.recipients=t.recipients.map(kw)),t.unprotected&&(e.unprotected=t.unprotected),e}function Iw(t){let e={};return t.encrypted_key&&(e.encrypted_key=Ue(t.encrypted_key)),t.header&&(e.header=t.header),e}function uu(t){let e={ciphertext:Ue(t.ciphertext),protected:Ue(t.protected),iv:Ue(t.iv),tag:Ue(t.tag)};return t.aad&&(e.aad=Ue(t.aad)),t.recipients&&(e.recipients=t.recipients.map(Iw)),t.unprotected&&(e.unprotected=t.unprotected),e}var Rw="dag-jose",Bw=133;function fu(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function Uw(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function Dw(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function lu(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function du(t){if(typeof t=="string"){let e=t.split(".");if(e.length===3)return ou(e);if(e.length===5)return au(e);throw new Error("Not a valid JOSE string")}if(fu(t)||lu(t))return t;throw new Error("Not a valid unencoded JOSE object")}function Fw(t){typeof t=="string"&&(t=du(t));let e;if(fu(t))e=su(t);else if(lu(t))e=cu(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(ws(e))}function Lw(t){let e;try{e=bs(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Uw(e))return iu(e);if(Dw(e))return uu(e);throw new Error("Not a valid DAG-JOSE object")}var ks={};K(ks,{identity:()=>Ot});var pu=0,jw="identity",hu=Ie,Mw=t=>pt(pu,hu(t)),Ot={code:pu,name:jw,encode:hu,digest:Mw};var Is={};K(Is,{identity:()=>$w});var $w=qt({prefix:"\0",name:"identity",encode:t=>Ba(t),decode:t=>Ra(t)});var Ns={};K(Ns,{base2:()=>qw});var qw=$({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rs={};K(Rs,{base8:()=>zw});var zw=$({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bs={};K(Bs,{base10:()=>Hw});var Hw=ht({prefix:"9",name:"base10",alphabet:"0123456789"});var Us={};K(Us,{base16:()=>Vw,base16upper:()=>Jw});var Vw=$({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jw=$({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ds={};K(Ds,{base36:()=>Gw,base36upper:()=>Ww});var Gw=ht({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ww=ht({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Fs={};K(Fs,{base256emoji:()=>Zw});var mu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Xw=mu.reduce((t,e,r)=>(t[r]=e,t),[]),Kw=mu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Qw(t){return t.reduce((e,r)=>(e+=Xw[r],e),"")}function Yw(t){let e=[];for(let r of t){let n=Kw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Zw=qt({prefix:"\u{1F680}",name:"base256emoji",encode:Qw,decode:Yw});var Ls={};K(Ls,{sha256:()=>Bn,sha512:()=>eb});var yu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Bn=xs({name:"sha2-256",code:18,encode:yu("SHA-256")}),eb=xs({name:"sha2-512",code:19,encode:yu("SHA-512")});var js={};K(js,{code:()=>rb,decode:()=>ob,encode:()=>nb,name:()=>tb});var tb="raw",rb=85,nb=t=>Ie(t),ob=t=>Ie(t);var Ms={};K(Ms,{code:()=>cb,decode:()=>fb,encode:()=>ub,name:()=>ab});var sb=new TextEncoder,ib=new TextDecoder,ab="json",cb=512,ub=t=>sb.encode(JSON.stringify(t)),fb=t=>JSON.parse(ib.decode(t));var ze={...Is,...Ns,...Rs,...Bs,...Us,...rs,...Ds,...ts,...Ss,...Fs},gu={...Ls,...ks},wu={raw:js,json:Ms};var bu="[a-fA-F\\d:]",wt=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${bu})|(?<=${bu})(?=\\s|$))`:"",De="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",V="[a-fA-F\\d]{1,4}",Un=`
(?:
(?:${V}:){7}(?:${V}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${V}:){6}(?:${De}|:${V}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${V}:){5}(?::${De}|(?::${V}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${V}:){4}(?:(?::${V}){0,1}:${De}|(?::${V}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${V}:){3}(?:(?::${V}){0,2}:${De}|(?::${V}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${V}:){2}(?:(?::${V}){0,3}:${De}|(?::${V}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${V}:){1}(?:(?::${V}){0,4}:${De}|(?::${V}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${V}){0,5}:${De}|(?::${V}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),lb=new RegExp(`(?:^${De}$)|(?:^${Un}$)`),db=new RegExp(`^${De}$`),pb=new RegExp(`^${Un}$`),$s=t=>t&&t.exact?lb:new RegExp(`(?:${wt(t)}${De}${wt(t)})|(?:${wt(t)}${Un}${wt(t)})`,"g");$s.v4=t=>t&&t.exact?db:new RegExp(`${wt(t)}${De}${wt(t)}`,"g");$s.v6=t=>t&&t.exact?pb:new RegExp(`${wt(t)}${Un}${wt(t)}`,"g");var Dn=$s;function qs(t){let e=(...r)=>t(...r);return Object.defineProperty(e,"name",{value:`functionTimeout(${t.name||"<anonymous>"})`,configurable:!0}),e}function vu(){return!1}var{toString:hb}=Object.prototype;function zs(t){return hb.call(t)==="[object RegExp]"}var xu={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function Hs(t,e={}){if(!zs(t))throw new TypeError("Expected a RegExp instance");let r=Object.keys(xu).map(o=>(typeof e[o]=="boolean"?e[o]:t[o])?xu[o]:"").join(""),n=new RegExp(e.source||t.source,r);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:t.lastIndex,n}function Fn(t,e,{timeout:r}={}){try{return qs(()=>Hs(t).test(e),{timeout:r})()}catch(n){if(vu(n))return!1;throw n}}var mb=15,Su=45,Vs={timeout:400};function Ln(t){return Fn(Dn({exact:!0}),t.slice(0,Su),Vs)}function Eu(t){return Fn(Dn.v6({exact:!0}),t.slice(0,Su),Vs)}function Tu(t){return Fn(Dn.v4({exact:!0}),t.slice(0,mb),Vs)}function Yt(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function jn(t=0){return globalThis.Buffer?.allocUnsafe!=null?Yt(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Au(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var _u=Au("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Js=Au("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=jn(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yb={utf8:_u,"utf-8":_u,hex:ze.base16,latin1:Js,ascii:Js,binary:Js,...ze},Mn=yb;function M(t,e="utf8"){let r=Mn[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Pu=Tu,gb=Eu,Gs=function(t){let e=0;if(t=t.toString().trim(),Pu(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(gb(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let s=Pu(r[n]),i;s&&(i=Gs(r[n]),r[n]=M(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,M(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(e+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[e++]=s>>8&255,o[e++]=s&255}return o}throw new Error("invalid ip address")},Ou=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(t[e+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(e+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var jr={},Ws={},bb=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];bb.forEach(t=>{let e=vb(...t);Ws[e.code]=e,jr[e.name]=e});function vb(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}function J(t){if(typeof t=="number"){if(Ws[t]!=null)return Ws[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(jr[t]!=null)return jr[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var He=N($n(),1);function me(t,e="utf8"){let r=Mn[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Yt(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function rt(t,e){e==null&&(e=t.reduce((o,s)=>o+s.length,0));let r=jn(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return Yt(r)}function Mu(t,e){switch(J(t).code){case 4:case 41:return Ub(e);case 6:case 273:case 33:case 132:return qu(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Fb(e);case 421:return $b(e);case 444:return ju(e);case 445:return ju(e);case 466:return Mb(e);default:return M(e,"base16")}}function $u(t,e){switch(J(t).code){case 4:return Lu(e);case 41:return Lu(e);case 6:case 273:case 33:case 132:return Ys(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return Db(e);case 421:return Lb(e);case 444:return qb(e);case 445:return zb(e);case 466:return jb(e);default:return me(e,"base16")}}var Qs=Object.values(ze).map(t=>t.decoder),Bb=function(){let t=Qs[0].or(Qs[1]);return Qs.slice(2).forEach(e=>t=t.or(e)),t}();function Lu(t){if(!Ln(t))throw new Error("invalid ip address");return Gs(t)}function Ub(t){let e=Ou(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Ln(e))throw new Error("invalid ip address");return e}function Ys(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function qu(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Db(t){let e=me(t),r=Uint8Array.from(He.default.encode(e.length));return rt([r,e],r.length+e.length)}function Fb(t){let e=He.default.decode(t);if(t=t.slice(He.default.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return M(t)}function Lb(t){let e;t[0]==="Q"||t[0]==="1"?e=_t(Q.decode(`z${t}`)).bytes:e=v.parse(t).multihash.bytes;let r=Uint8Array.from(He.default.encode(e.length));return rt([r,e],r.length+e.length)}function jb(t){let e=Bb.decode(t),r=Uint8Array.from(He.default.encode(e.length));return rt([r,e],r.length+e.length)}function Mb(t){let e=He.default.decode(t),r=t.slice(He.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+M(r,"base64url")}function $b(t){let e=He.default.decode(t),r=t.slice(He.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return M(r,"base58btc")}function qb(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=Ne.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Ys(n);return rt([r,o],r.length+o.length)}function zb(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=Ne.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Ys(n);return rt([r,o],r.length+o.length)}function ju(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=M(e,"base32"),o=qu(r);return`${n}:${o}`}var Zt=N($n(),1);function Hb(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=J(o);if(s.size===0){e.push([o]);continue}if(n++,n>=r.length)throw Hu("invalid address: "+t);if(s.path===!0){e.push([o,ni(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function Vb(t){let e=[];return t.map(r=>{let n=Hn(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),ni(e.join("/"))}function Jb(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=Hn(e);return e.length>1?[r.code,$u(r.code,e[1])]:[r.code]})}function Zs(t){return t.map(e=>{let r=Hn(e);return e[1]!=null?[r.code,Mu(r.code,e[1])]:[r.code]})}function ei(t){return zn(rt(t.map(e=>{let r=Hn(e),n=Uint8Array.from(Zt.default.encode(r.code));return e.length>1&&e[1]!=null&&(n=rt([n,e[1]])),n})))}function ti(t,e){return t.size>0?t.size/8:t.size===0?0:Zt.default.decode(e)+Zt.default.decode.bytes}function qn(t){let e=[],r=0;for(;r<t.length;){let n=Zt.default.decode(t,r),o=Zt.default.decode.bytes,s=J(n),i=ti(s,t.slice(r+o));if(i===0){e.push([n]),r+=o;continue}let a=t.slice(r+o,r+o+i);if(r+=i+o,r>t.length)throw Hu("Invalid address Uint8Array: "+M(t,"base16"));e.push([n,a])}return e}function ri(t){let e=qn(t),r=Zs(e);return Vb(r)}function Gb(t){t=ni(t);let e=Hb(t),r=Jb(e);return ei(r)}function zu(t){return Gb(t)}function zn(t){let e=Wb(t);if(e!=null)throw e;return Uint8Array.from(t)}function Wb(t){try{qn(t)}catch(e){return e}}function ni(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Hu(t){return new Error("Error parsing address: "+t)}function Hn(t){return J(t[0])}var si=N($n(),1);var Xu=N(oe(),1);function Mr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var er=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},oi=function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},$r,qr,zr,Gu,Qb=Symbol.for("nodejs.util.inspect.custom"),Wu=[J("dns").code,J("dns4").code,J("dns6").code,J("dnsaddr").code],Yb=[J("p2p").code,J("ipfs").code],Zb=new Map,Ku=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Vn(t){return Boolean(t?.[Ku])}var nt=class{constructor(e){if($r.set(this,void 0),qr.set(this,void 0),zr.set(this,void 0),this[Gu]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=zn(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=zu(e)}else if(Vn(e))this.bytes=zn(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return er(this,$r,"f")==null&&oi(this,$r,ri(this.bytes),"f"),er(this,$r,"f")}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),r=this.toString().split("/").slice(1),n,o;if(r.length>2)Wu.includes(e[0])&&Yb.includes(e[1])?(n=J("tcp").name,o=443):(n=J(r[2]).name,o=parseInt(r[3]));else if(Wu.includes(e[0]))n=J("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:r[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},J(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let o=si.default.decode(r,n),s=si.default.decode.bytes,i=J(o),a=ti(i,r.slice(n+s));n+=a+s,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return er(this,qr,"f")==null&&oi(this,qr,qn(this.bytes),"f"),er(this,qr,"f")}stringTuples(){return er(this,zr,"f")==null&&oi(this,zr,Zs(this.tuples()),"f"),er(this,zr,"f")}encapsulate(e){return e=new nt(e),new nt(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new nt(n.slice(0,o))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new nt(ei(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===jr.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?M(Q.decode(`z${n}`),"base58btc"):M(v.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>J(r[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return Mr(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Zb.get(r.name);if(n==null)throw(0,Xu.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(s=>new nt(s))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[($r=new WeakMap,qr=new WeakMap,zr=new WeakMap,Gu=Ku,Qb)](){return this.inspect()}inspect(){return"<Multiaddr "+M(this.bytes,"base16")+" - "+ri(this.bytes)+">"}};function D(t){return new nt(t)}var Je=N(ef(),1);var u0=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;C.nanosecond=C.ns=1/1e6;C.\u00B5s=C.\u03BCs=C.us=C.microsecond=1/1e3;C.millisecond=C.ms=C[""]=1;C.second=C.sec=C.s=C.ms*1e3;C.minute=C.min=C.m=C.s*60;C.hour=C.hr=C.h=C.m*60;C.day=C.d=C.h*24;C.week=C.wk=C.w=C.d*7;C.month=C.b=C.d*(365.25/12);C.year=C.yr=C.y=C.d*365.25;function C(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(u0,function(n,o,s){s=tf(s),s&&(r=(r||0)+parseFloat(o,10)*s)}),r&&r/(tf(e)||1)}function tf(t){return C[t]||C[t.toLowerCase().replace(/s$/,"")]}var Gn=C;var Ve=N(af(),1);Ve.default.formatters.b=t=>t==null?"undefined":Q.baseEncode(t);Ve.default.formatters.t=t=>t==null?"undefined":Ne.baseEncode(t);Ve.default.formatters.m=t=>t==null?"undefined":Kt.baseEncode(t);Ve.default.formatters.p=t=>t==null?"undefined":t.toString();Ve.default.formatters.c=t=>t==null?"undefined":t.toString();Ve.default.formatters.k=t=>t==null?"undefined":t.toString();function Kn(t){return Object.assign((0,Ve.default)(t),{error:(0,Ve.default)(`${t}:error`),trace:(0,Ve.default)(`${t}:trace`)})}var It=N(to(),1);var Df=N(hi(),1),ro=Df.default;var no=(t,e)=>e,tv=(t,e,r,n)=>{if(n!=null&&n.assumeHttp===!1)return`tcp://${t}:${e}`;let o="tcp",s=`:${e}`;return r[r.length-1].protocol==="tcp"&&(o=e==="443"?"https":"http",s=e==="443"||e==="80"?"":s),`${o}://${t}${s}`},rv={ip4:no,ip6:(t,e,r,n)=>n.length===1&&n[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,n,o)=>n.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${t}:${e}`:tv(t,e,n,o),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:no,dns4:no,dns6:no,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};function Ff(t,e){let r=D(t),n=r.toString().split("/").slice(1);return r.tuples().map(o=>({protocol:n.shift()??"",content:o[1]!=null?n.shift()??"":""})).reduce((o,s,i,a)=>{let c=rv[s.protocol];if(c==null)throw new Error(`Unsupported protocol ${s.protocol}`);return c(o,s.content,i,a,e)},"")}function kt(t){try{t=Ff(D(t))}catch{}return t=t.toString(),t}var Lf=()=>{};var jf=Kn("ipfs-http-client:lib:error-handler"),nv=ro.bind({ignoreUndefined:!0}),ov=Je.isBrowser||Je.isWebWorker?location.protocol:"http",sv=Je.isBrowser||Je.isWebWorker?location.hostname:"localhost",iv=Je.isBrowser||Je.isWebWorker?location.port:"5001",av=(t={})=>{let e,r={},n;if(typeof t=="string"||Vn(t))e=new URL(kt(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||Vn(t.url))e=new URL(kt(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};let o=(r.protocol||ov).replace(":",""),s=(r.host||sv).split(":")[0],i=r.port||iv;e=new URL(`${o}://${s}:${i}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),Je.isNode){let o=Lf(e);n=r.agent||new o({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},cv=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){let n=await t.json();jf(n),e=n.Message||n.message}else e=await t.text()}catch(n){jf("Failed to parse error response",n),e=n.message}let r=new It.default.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new It.default.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new It.default.TimeoutError)),e&&e.includes("request timed out")&&(r=new It.default.TimeoutError),e&&(r.message=e),r},uv=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Mf=t=>t.replace(uv,function(e){return"-"+e.toLowerCase()}),fv=t=>typeof t=="string"?Gn(t):t,bt=class extends It.default{constructor(e={}){let r=av(e);super({timeout:fv(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:cv,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&s.append(Mf(i),a),i==="timeout"&&!isNaN(a)&&s.append(Mf(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,nv(s,{method:"POST"})))}},U2=It.default.HTTPError;var p=t=>e=>t(new bt(e),e);function oo(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}var $f=N(oe(),1);function so(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,$f.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function m({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:o,...s}={}){e&&(s={...s,...e}),r&&(s.hash=r),n!=null&&(n=so(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=oo(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let i=new URLSearchParams(s);return t.forEach(a=>i.append("arg",a)),i}var qf=p(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Keys||[]).map(o=>v.parse(o["/"]))}return e});var zf=p(t=>{async function e(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:m({...n,peer:r.toString()}),headers:n.headers})).json()).Keys||[]).map(s=>v.parse(s["/"]))}return e});var lv=N(oe(),1);var Hf=Symbol.for("@libp2p/peer-id");var Vf=Object.values(ze).map(t=>t.decoder).reduce((t,e)=>t.or(e),ze.identity.decoder),Jf=114,Gf=36,Wf=37,Gr=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[Hf](){return!0}toString(){return this.string==null&&(this.string=Q.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return v.createV1(Jf,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Mr(this.multihash.bytes,e);if(typeof e=="string")return q(e).equals(this);if(e?.multihash?.bytes!=null)return Mr(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}},Wr=class extends Gr{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Xr=class extends Gr{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Kr=class extends Gr{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function q(t,e){if(e=e??Vf,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=_t(Q.decode(`z${t}`));return t.startsWith("12D")?new Xr({multihash:r}):t.startsWith("16U")?new Kr({multihash:r}):new Wr({multihash:r})}return dv(Vf.decode(t))}function dv(t){try{let e=_t(t);if(e.code===Ot.code){if(e.digest.length===Gf)return new Xr({multihash:e});if(e.digest.length===Wf)return new Kr({multihash:e})}if(e.code===Bn.code)return new Wr({multihash:e})}catch{return pv(v.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function pv(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==Jf)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===Bn.code)return new Wr({multihash:t.multihash});if(e.code===Ot.code){if(e.digest.length===Gf)return new Xr({multihash:t.multihash});if(e.digest.length===Wf)return new Kr({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}var io=p(t=>{async function e(r={}){let n=await t.post("bitswap/stat",{searchParams:m(r),signal:r.signal,headers:r.headers});return hv(await n.json())}return e});function hv(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>v.parse(e["/"])),peers:(t.Peers||[]).map(e=>q(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}var Xf=p(t=>{async function e(r,n={}){return(await t.post("bitswap/unwant",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).json()}return e});function Kf(t){return{wantlist:qf(t),wantlistForPeer:zf(t),unwant:Xf(t),stat:io(t)}}var ao=p(t=>{async function e(r,n={}){let o=await t.post("block/get",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return e});var Yf=N(oe(),1);function st(t){let[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}async function*Se(t,e={}){let r=t.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}async function Qr(t){let e=[];for await(let r of t)e.push(r);return e}function Ee(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function it(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function Yr(t){return typeof t=="object"&&(t.path||t.content)}var at=t=>t&&typeof t.getReader=="function";async function Zf(t){if(Ee(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(it(t))return t;if(at(t)&&(t=Se(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=st(t),{value:r,done:n}=await e.peek();if(n)return Qf(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Qr(e))]);if(Ee(r)||typeof r=="string"||r instanceof String)return Qf(e)}throw(0,Yf.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function Qf(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}var rn=N(oe(),1);async function*ar(t,e){for await(let r of t)yield e(r)}var Jl=N(oe(),1);var ct=N(Vl(),1),ur=ct.default.Reader,Ui=ct.default.Writer,O=ct.default.util,re=ct.default.roots["ipfs-unixfs"]||(ct.default.roots["ipfs-unixfs"]={}),Tv=re.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=O.newBuffer([]),t.prototype.filesize=O.Long?O.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=O.emptyArray,t.prototype.hashType=O.Long?O.Long.fromBits(0,0,!0):0,t.prototype.fanout=O.Long?O.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,n){if(n||(n=Ui.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&re.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},t.decode=function(r,n){r instanceof ur||(r=ur.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.Data;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(i&7)===2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=re.UnixTime.decode(r,r.uint32());break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Type"))throw O.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof re.Data)return r;var n=new re.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?O.base64.decode(r.Data,n.Data=O.newBuffer(O.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(O.Long?(n.filesize=O.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new O.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)O.Long?(n.blocksizes[o]=O.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new O.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&(O.Long?(n.hashType=O.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new O.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(O.Long?(n.fanout=O.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new O.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=re.UnixTime.fromObject(r.mtime)}return n},t.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=O.newBuffer(o.Data))),O.Long){var s=new O.Long(0,0,!0);o.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.filesize=n.longs===String?"0":0;if(O.Long){var s=new O.Long(0,0,!0);o.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.hashType=n.longs===String?"0":0;if(O.Long){var s=new O.Long(0,0,!0);o.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?re.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?O.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?O.Long.prototype.toString.call(r.filesize):n.longs===Number?new O.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)typeof r.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(r.blocksizes[i]):r.blocksizes[i]:o.blocksizes[i]=n.longs===String?O.Long.prototype.toString.call(r.blocksizes[i]):n.longs===Number?new O.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0):r.blocksizes[i]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?O.Long.prototype.toString.call(r.hashType):n.longs===Number?new O.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?O.Long.prototype.toString.call(r.fanout):n.longs===Number?new O.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=re.UnixTime.toObject(r.mtime,n)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ct.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),KT=re.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Seconds=O.Long?O.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,n){return n||(n=Ui.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},t.decode=function(r,n){r instanceof ur||(r=ur.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.UnixTime;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Seconds"))throw O.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof re.UnixTime)return r;var n=new re.UnixTime;return r.Seconds!=null&&(O.Long?(n.Seconds=O.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new O.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},t.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(O.Long){var s=new O.Long(0,0,!1);o.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?O.Long.prototype.toString.call(r.Seconds):n.longs===Number?new O.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ct.default.util.toJSONOptions)},t})(),QT=re.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.MimeType="",t.encode=function(r,n){return n||(n=Ui.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},t.decode=function(r,n){r instanceof ur||(r=ur.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new re.Metadata;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(i&7);break}}return s},t.fromObject=function(r){if(r instanceof re.Metadata)return r;var n=new re.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},t.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ct.default.util.toJSONOptions)},t})();var YT=parseInt("0644",8),ZT=parseInt("0755",8);function fr(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function lr(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Jl.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}async function*mo(t,e){if(typeof t=="string"||t instanceof String||Ee(t)||it(t)||t._readableState)throw(0,rn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(at(t)&&(t=Se(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=st(t),{value:n,done:o}=await r.peek();if(o){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,rn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*ar(r,s=>Di({content:s},e));return}if(Ee(n)){yield Di({content:r},e);return}if(Yr(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||at(n)||it(n)){yield*ar(r,s=>Di(s,e));return}}throw Yr(t)?(0,rn.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,rn.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function Di(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r||"",mode:fr(n),mtime:lr(o)};return s?i.content=await e(s):r||(i.content=await e(t)),i}function Gl(t){return mo(t,Zf,!0)}function Wl(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function G(t,e,r={}){let n=[],o=new FormData,s=0,i=0;for await(let{content:a,path:c,mode:u,mtime:f}of Gl(t)){let l="",y=a?"file":"dir";s>0&&(l=`-${s}`);let w=y+l,h=[];if(u!=null&&h.push(`mode=${Wl(u)}`),f!=null){let{secs:d,nsecs:b}=f;h.push(`mtime=${d}`),b!=null&&h.push(`mtime-nsecs=${b}`)}if(h.length&&(w=`${w}?${h.join("&")}`),a){o.set(w,a,c!=null?encodeURIComponent(c):void 0);let d=i+a.size;n.push({name:c,start:i,end:d}),i=d}else if(c!=null)o.set(w,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:i,parts:n,headers:r,body:o}}var Xl=N(eo(),1);function Av(t){return t.filter(Boolean)}function W(...t){return(0,Xl.anySignal)(Av(t))}var Kl=p(t=>{async function e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),i;try{i=await(await t.post("block/put",{signal:s,searchParams:m(n),...await G([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return e(r,{...n,format:"cbor"});throw a}return v.parse(i.Key)}return e});var Ql=p(t=>{async function*e(r,n={}){Array.isArray(r)||(r=[r]);let o=await t.post("block/rm",{signal:n.signal,searchParams:m({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield Pv(s)}return e});function Pv(t){let e={cid:v.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}var Yl=p(t=>{async function e(r,n={}){let s=await(await t.post("block/stat",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:v.parse(s.Key),size:s.Size}}return e});function Zl(t){return{get:ao(t),put:Kl(t),rm:Ql(t),stat:Yl(t)}}var ed=p(t=>{async function e(r,n={}){let o=await t.post("bootstrap/add",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>D(i))}}return e});var td=p(t=>{async function e(r={}){let n=await t.post("bootstrap/rm",{signal:r.signal,searchParams:m({...r,all:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>D(s))}}return e});var rd=p(t=>{async function e(r={}){let n=await t.post("bootstrap/list",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>D(s))}}return e});var nd=p(t=>{async function e(r={}){let n=await t.post("bootstrap/add",{signal:r.signal,searchParams:m({...r,default:!0}),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>D(s))}}return e});var od=p(t=>{async function e(r,n={}){let o=await t.post("bootstrap/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>D(i))}}return e});function sd(t){return{add:ed(t),clear:td(t),list:rd(t),reset:nd(t),rm:od(t)}}var id=p(t=>{async function e(r,n={}){let s=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return e});function k(t){if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,o)=>(e.test(o)?n[o.toLowerCase()]=t[o]:e.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=t[o]:n[o]=t[o],n),r)}var ad=p(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).map(s=>k(s))}return e});function cd(t){return{apply:id(t),list:ad(t)}}var ud=p(t=>async(r,n={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json()).Value});var fd=p(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:m({...r}),headers:r.headers})).json());var ld=p(t=>async(r,n={})=>{let o=new AbortController,s=W(o.signal,n.signal);await(await t.post("config/replace",{signal:s,searchParams:m(n),...await G([me(JSON.stringify(r))],o,n.headers)})).text()});var dd=p(t=>async(r,n,o={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...Ov(r,n)};await(await t.post("config",{signal:o.signal,searchParams:m(s),headers:o.headers})).text()}),Ov=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function pd(t){return{getAll:fd(t),get:ud(t),set:dd(t),replace:ld(t),profiles:cd(t)}}var hd=p(t=>{async function*e(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:m({arg:r.toString()}),headers:n.headers})).iterator()}return e});var Fi=N(oe(),1);async function*Li(t,e,r,n,o){let s=async u=>{let f=await r.getCodec(u.code),l=await n(u,o);return f.decode(l)},i=e.split("/").filter(Boolean),a=await s(t),c=t;for(;i.length;){let u=i.shift();if(!u)throw(0,Fi.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:i.join("/")};else throw(0,Fi.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=v.asCID(a);f&&(c=f,a=await s(a))}yield{value:a,remainderPath:""}}async function Bt(t){for await(let e of t)return e}async function ut(t){let e;for await(let r of t)e=r;return e}var md=N(oe(),1);var yd=(t,e)=>p((n,o)=>{let s=ao(o);return async(a,c={})=>{if(c.path){let w=c.localResolve?await Bt(Li(a,c.path,t,s,c)):await ut(Li(a,c.path,t,s,c));if(!w)throw(0,md.default)(new Error("Not found"),"ERR_NOT_FOUND");return w}let u=await t.getCodec(a.code),f=await s(a,c);return{value:u.decode(f),remainderPath:""}}})(e);var gd=p(t=>{async function*e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),{headers:i,body:a}=await G(r,o,n.headers),c=await t.post("dag/import",{signal:s,headers:i,body:a,searchParams:m({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:l}=u;yield{root:{cid:v.parse(f),pinErrorMsg:l}}}}return e});var yo=(t,e)=>p(n=>async(s,i={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i},c;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=s}else c=(await t.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let u=new AbortController,f=W(u.signal,a.signal),y=await(await n.post("dag/put",{timeout:a.timeout,signal:f,searchParams:m(a),...await G([c],u,a.headers)})).json();return v.parse(y.Cid["/"])})(e);var wd=p(t=>async(r,n={})=>{let s=await(await t.post("dag/resolve",{signal:n.signal,searchParams:m({arg:`${r}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:v.parse(s.Cid["/"]),remainderPath:s.RemPath}});function bd(t,e){return{export:hd(e),get:yd(t,e),import:gd(e),put:yo(t,e),resolve:wd(e)}}var _e=t=>{if(t.Type===0)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===1)return{from:q(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>D(n)),protocols:[]})),providers:(t.Responses||[]).map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>D(n)),protocols:[]}))};if(t.Type===2){let e={id:t.ID??q(t.ID),multiaddrs:[],protocols:[]};return t.Responses&&t.Responses.length&&(e={id:q(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(r=>D(r)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:e}}if(t.Type===3)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===4)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:e,Addrs:r})=>({id:q(e),multiaddrs:r.map(n=>D(n)),protocols:[]}))};if(t.Type===5)return{name:"VALUE",type:t.Type,value:me(t.Extra,"base64pad")};if(t.Type===6){let e=t.Responses.map(({ID:r})=>q(r));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(t.Type===7)return{name:"DIALING_PEER",type:t.Type,peer:q(t.ID)};throw new Error("Unknown DHT event type")};var vd=p(t=>{async function*e(r,n={}){let o=await t.post("dht/findpeer",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers});for await(let s of o.ndjson())yield _e(s)}return e});var xd=p(t=>{async function*e(r,n={}){let o=await t.post("dht/findprovs",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield _e(s)}return e});var Sd=p(t=>{async function*e(r,n={}){let o=await t.post("dht/get",{signal:n.signal,searchParams:m({arg:r instanceof Uint8Array?M(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield _e(s)}return e});var Ed=p(t=>{async function*e(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await t.post("dht/provide",{signal:n.signal,searchParams:m({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield _e(i)}return e});var Td=p(t=>{async function*e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("dht/put",{signal:i,searchParams:m({arg:r instanceof Uint8Array?M(r):r.toString(),...o}),...await G([n],s,o.headers)});for await(let c of a.ndjson())yield _e(c)}return e});var _d=p(t=>{async function*e(r,n={}){let o=await t.post("dht/query",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield _e(s)}return e});function Ad(t){return{findPeer:vd(t),findProvs:xd(t),get:Sd(t),provide:Ed(t),put:Td(t),query:_d(t)}}var Pd=p(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});var Od=p(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});var Cd=p(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()}return e});function kd(t){return{cmds:Pd(t),net:Od(t),sys:Cd(t)}}var Id=p(t=>{async function e(r,n,o={}){await(await t.post("files/chmod",{signal:o.signal,searchParams:m({arg:r,mode:n,...o}),headers:o.headers})).text()}return e});var Nd=p(t=>{async function e(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:o.signal,searchParams:m({arg:s.concat(n).map(a=>v.asCID(a)?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}return e});var Rd=p(t=>{async function e(r,n={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return v.parse(s.Cid)}return e});function nn(t){let e=k(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}var Ud=p(t=>{async function*e(r,n={}){if(!r)throw new Error("ipfs.files.ls requires a path");let o=await t.post("files/ls",{signal:n.signal,searchParams:m({arg:v.asCID(r)?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries||[])yield Bd(nn(i));else yield Bd(nn(s))}return e});function Bd(t){return t.hash&&(t.cid=v.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}var Dd=p(t=>{async function e(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).text()}return e});var Fd=p(t=>{async function e(r,n,o={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:o.signal,searchParams:m({arg:r.concat(n),...o}),headers:o.headers})).text()}return e});var Md=N(jd(),1),$d=p(t=>{async function*e(r,n={}){let o=await t.post("files/read",{signal:n.signal,searchParams:m({arg:r,count:n.length,...n}),headers:n.headers});yield*(0,Md.default)(o.body)}return e});var qd=N(to(),1),zd=p(t=>{async function e(r,n={}){let o=await t.post("files/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new qd.default.HTTPError(o);throw i.message=s,i}}return e});var go=p(t=>{async function e(r,n={}){let s=await(await t.post("files/stat",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality||!1,Fv(nn(s))}return e});function Fv(t){return t.cid=v.parse(t.hash),delete t.hash,t}var Hd=p(t=>{async function e(r,n={}){await(await t.post("files/touch",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).text()}return e});var Vd=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal);await(await t.post("files/write",{signal:i,searchParams:m({arg:r,streamChannels:!0,count:o.length,...o}),...await G([{content:n,path:"arg",mode:oo(o.mode),mtime:so(o.mtime)}],s,o.headers)})).text()}return e});function Jd(t){return{chmod:Id(t),cp:Nd(t),flush:Rd(t),ls:Ud(t),mkdir:Dd(t),mv:Fd(t),read:$d(t),rm:zd(t),stat:go(t),touch:Hd(t),write:Vd(t)}}var Gd=N(oe(),1),Wd=p(t=>async(r,n,o={})=>{throw(0,Gd.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Xd=p(t=>{async function e(r,n={type:"Ed25519"}){let s=await(await t.post("key/gen",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return k(s)}return e});var Kd=p(t=>{async function e(r,n,o,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:m({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return k(a)}return e});var Qd=N(oe(),1),Yd=p(t=>async(r,n={})=>{throw(0,Qd.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Zd=p(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Keys||[]).map(s=>k(s))}return e});var ep=p(t=>{async function e(r,n,o={}){let s=await t.post("key/rename",{signal:o.signal,searchParams:m({arg:[r,n],...o}),headers:o.headers});return k(await s.json())}return e});var tp=p(t=>{async function e(r,n={}){let s=await(await t.post("key/rm",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json();return k(s.Keys[0])}return e});function rp(t){return{export:Wd(t),gen:Xd(t),import:Kd(t),info:Yd(t),list:Zd(t),rename:ep(t),rm:tp(t)}}var np=p(t=>{async function e(r,n,o={}){let s=await t.post("log/level",{signal:o.signal,searchParams:m({arg:[r,n],...o}),headers:o.headers});return k(await s.json())}return e});var op=p(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Strings}return e});var sp=p(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:m(r),headers:r.headers})).ndjson()}return e});function ip(t){return{level:np(t),ls:op(t),tail:sp(t)}}var ap=p(t=>{async function e(r,n={}){let o=await t.post("name/publish",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers});return k(await o.json())}return e});var cp=p(t=>{async function*e(r,n={}){let o=await t.post("name/resolve",{signal:n.signal,searchParams:m({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}return e});var up=p(t=>{async function e(r,n={}){let o=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers});return k(await o.json())}return e});var fp=p(t=>{async function e(r={}){let n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:m(r),headers:r.headers});return k(await n.json())}return e});var lp=p(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Strings||[]}return e});function dp(t){return{cancel:up(t),state:fp(t),subs:lp(t)}}function pp(t){return{publish:ap(t),resolve:cp(t),pubsub:dp(t)}}var hp=p(t=>{async function e(r,n={}){let s=await(await t.post("object/data",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return e});var mp=p(t=>{async function e(r,n={}){let s=await(await t.post("object/get",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:me(s.Data,"base64pad"),Links:(s.Links||[]).map(i=>({Name:i.Name,Hash:v.parse(i.Hash),Tsize:i.Size}))}}return e});var yp=p(t=>{async function e(r,n={}){return((await(await t.post("object/links",{signal:n.signal,searchParams:m({arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n}),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:v.parse(i.Hash)}))}return e});var gp=p(t=>{async function e(r={}){let n=await t.post("object/new",{signal:r.signal,searchParams:m({arg:r.template,...r}),headers:r.headers}),{Hash:o}=await n.json();return v.parse(o)}return e});var wp=(t,e)=>p(n=>{let o=yo(t,e);async function s(i,a={}){return o(i,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(e);var bp=p(t=>{async function e(r,n={}){let s=await(await t.post("object/stat",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers})).json();return{...s,Hash:v.parse(s.Hash)}}return e});var vp=p(t=>{async function e(r,n,o={}){let s=await t.post("object/patch/add-link",{signal:o.signal,searchParams:m({arg:[`${r}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return v.parse(i)}return e});var xp=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("object/patch/append-data",{signal:i,searchParams:m({arg:`${r}`,...o}),...await G([n],s,o.headers)}),{Hash:c}=await a.json();return v.parse(c)}return e});var Sp=p(t=>{async function e(r,n,o={}){let s=await t.post("object/patch/rm-link",{signal:o.signal,searchParams:m({arg:[`${r}`,n.Name||n.name||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return v.parse(i)}return e});var Ep=p(t=>{async function e(r,n,o={}){let s=new AbortController,i=W(s.signal,o.signal),a=await t.post("object/patch/set-data",{signal:i,searchParams:m({arg:[`${r}`],...o}),...await G([n],s,o.headers)}),{Hash:c}=await a.json();return v.parse(c)}return e});function Tp(t){return{addLink:vp(t),appendData:xp(t),rmLink:Sp(t),setData:Ep(t)}}function _p(t,e){return{data:hp(e),get:mp(e),links:yp(e),new:gp(e),put:wp(t,e),stat:bp(e),patch:Tp(e)}}var dr=N(oe(),1);async function*wo(t){if(t==null)throw(0,dr.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");let e=v.asCID(t);if(e){yield je({cid:e});return}if(t instanceof String||typeof t=="string"){yield je({path:t});return}if(t.cid!=null||t.path!=null)return yield je(t);if(Symbol.iterator in t){let r=t[Symbol.iterator](),n=r.next();if(n.done)return r;if(v.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield je({cid:n.value});for(let o of r)yield je({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield je(n.value);for(let o of r)yield je(o);return}throw(0,dr.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){let r=t[Symbol.asyncIterator](),n=await r.next();if(n.done)return r;if(v.asCID(n.value)||n.value instanceof String||typeof n.value=="string"){yield je({cid:n.value});for await(let o of r)yield je({cid:o});return}if(n.value.cid!=null||n.value.path!=null){yield je(n.value);for await(let o of r)yield je(o);return}throw(0,dr.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw(0,dr.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function je(t){let e=t.cid||`${t.path}`;if(!e)throw(0,dr.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}var bo=p(t=>{async function*e(r,n={}){for await(let{path:o,recursive:s,metadata:i}of wo(r)){let a=await t.post("pin/add",{signal:n.signal,searchParams:m({...n,arg:o,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield v.parse(u);continue}yield v.parse(c)}}}return e});function Ap(t){let e=bo(t);return p(()=>{async function r(n,o={}){return ut(e([{path:n,...o}],o))}return r})(t)}function Pp(t,e,r){let n={type:t,cid:v.parse(e)};return r&&(n.metadata=r),n}var Op=p(t=>{async function*e(r={}){let n=[];r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);let o=await t.post("pin/ls",{signal:r.signal,searchParams:m({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of o.ndjson()){if(s.Keys){for(let i of Object.keys(s.Keys))yield Pp(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield Pp(s.Type,s.Cid,s.Metadata)}}return e});var vo=p(t=>{async function*e(r,n={}){for await(let{path:o,recursive:s}of wo(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:m({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>v.parse(u));continue}yield v.parse(c)}}}return e});var Cp=t=>{let e=vo(t);return p(()=>{async function r(n,o={}){return ut(e([{path:n,...o}],o))}return r})(t)};var xo=({Name:t,Status:e,Cid:r})=>({cid:v.parse(r),name:t,status:e}),kp=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},Ip=t=>{if(v.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},pr=({service:t,cid:e,name:r,status:n,all:o})=>{let s=m({service:kp(t),name:r,force:o?!0:void 0});if(e)for(let i of e)s.append("cid",Ip(i));if(n)for(let i of n)s.append("status",i);return s},Np=({cid:t,service:e,background:r,name:n,origins:o})=>{let s=m({arg:Ip(t),service:kp(e),name:n,background:r?!0:void 0});if(o)for(let i of o)s.append("origin",i.toString());return s};function Rp(t){async function e(r,{timeout:n,signal:o,headers:s,...i}){let a=await t.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:Np({cid:r,...i})});return xo(await a.json())}return e}function Bp(t){async function*e({timeout:r,signal:n,headers:o,...s}){let i=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:pr(s)});for await(let a of i.ndjson())yield xo(a)}return e}function Up(t){async function e({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:pr({...s,all:!1})})}return e}function Dp(t){async function e({timeout:r,signal:n,headers:o,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:pr({...s,all:!0})})}return e}function Fp(t){let e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function Lp(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:Lv(t.Stat)}}}function Lv(t){switch(t.Status){case"valid":{let{Pinning:e,Pinned:r,Queued:n,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function jp(t){async function e(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:m({arg:[r,Fp(o),s]}),headers:i})}return e}function Mp(t){async function e(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r,a=await t.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?m({stat:n}):void 0}),{RemoteServices:c}=await a.json();return c.map(Lp)}return e}function $p(t){async function e(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:m({arg:r})})}return e}function qp(t){let e=new bt(t);return{add:jp(e),ls:Mp(e),rm:$p(e)}}function zp(t){let e=new bt(t);return{add:Rp(e),ls:Bp(e),rm:Up(e),rmAll:Dp(e),service:qp(t)}}function Hp(t){return{addAll:bo(t),add:Ap(t),ls:Op(t),rmAll:vo(t),rm:Cp(t),remote:zp(t)}}var Vp=t=>Array.isArray(t)?t.map(So):t,So=t=>M(hr(t)),hr=t=>gt.decode(t),Jp=t=>BigInt(`0x${M(gt.decode(t),"base16")}`),mr=t=>gt.encode(me(t));var Gp=p(t=>{async function e(r={}){let{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:m(r),headers:r.headers})).json();return Vp(n)||[]}return e});var Wp=p(t=>{async function e(r,n={}){let o=await t.post("pubsub/peers",{signal:n.signal,searchParams:m({arg:mr(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var Xp=p(t=>{async function e(r,n,o={}){let s=m({arg:mr(r),...o}),i=new AbortController,a=W(i.signal,o.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await G([n],i,o.headers)})).text()}return e});var jv=Kn("ipfs-http-client:pubsub:subscribe"),Kp=(t,e)=>p(r=>{async function n(o,s,i={}){i.signal=e.subscribe(o,s,i.signal);let a,c,u=new Promise((l,y)=>{a=l,c=y}),f=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:i.signal,searchParams:m({arg:mr(o),...i}),headers:i.headers}).catch(l=>{e.unsubscribe(o,s),c(l)}).then(l=>{clearTimeout(f),l&&(Mv(l,{onMessage:y=>{if(!!s){if(typeof s=="function"){s(y);return}typeof s.handleEvent=="function"&&s.handleEvent(y)}},onEnd:()=>e.unsubscribe(o,s),onError:i.onError}),a())}),u}return n})(t);async function Mv(t,{onMessage:e,onEnd:r,onError:n}){n=n||jv;try{for await(let o of t.ndjson())try{if(!o.from)continue;o.from!=null&&o.seqno!=null?e({type:"signed",from:q(o.from),data:hr(o.data),sequenceNumber:Jp(o.seqno),topic:So(o.topicIDs[0]),key:hr(o.key??"u"),signature:hr(o.signature??"u")}):e({type:"unsigned",data:hr(o.data),topic:So(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){$v(o)||n(o,!0)}finally{r()}}var $v=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};var Qp=(t,e)=>{async function r(n,o){e.unsubscribe(n,o)}return r};var Eo=class{constructor(){this._subs=new Map}subscribe(e,r,n){let o=this._subs.get(e)||[];if(o.find(i=>i.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);let s=new AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(e,r)),s.signal}unsubscribe(e,r){let n=this._subs.get(e)||[],o;r?(this._subs.set(e,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(e,[]),o=n),(this._subs.get(e)||[]).length||this._subs.delete(e),o.forEach(s=>s.controller.abort())}};function Yp(t){let e=new Eo;return{ls:Gp(t),peers:Wp(t),publish:Xp(t),subscribe:Kp(t,e),unsubscribe:Qp(t,e)}}var Zp=p(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:k,searchParams:m(r),headers:r.headers})).ndjson()}return e});var eh=p((t,e)=>Object.assign(async function*(n,o={}){let s=Array.isArray(n)?n:[n];yield*(await t.post("refs",{signal:o.signal,searchParams:m({arg:s.map(a=>`${a instanceof Uint8Array?v.decode(a):a}`),...o}),headers:o.headers,transform:k})).ndjson()},{local:Zp(e)}));var th=p(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:m(r),headers:r.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?v.parse(o.Key["/"]):null})})).ndjson()}return e});var To=p(t=>{async function e(r={}){let o=await(await t.post("repo/stat",{signal:r.signal,searchParams:m(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return e});var rh=p(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:m(r),headers:r.headers})).json()).Version}return e});function nh(t){return{gc:th(t),stat:To(t),version:rh(t)}}var oh=p(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:m(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return e});function sh(t){return{bitswap:io(t),repo:To(t),bw:oh(t)}}var ih=p(t=>{async function e(r={}){let n=await t.post("swarm/addrs",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:q(s),addrs:(o[s]||[]).map(i=>D(i))}))}return e});var ah=p(t=>{async function e(r,n={}){let o=await t.post("swarm/connect",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var ch=p(t=>{async function e(r,n={}){let o=await t.post("swarm/disconnect",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return e});var uh=p(t=>{async function e(r={}){let n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Strings:o}=await n.json();return(o||[]).map(s=>D(s))}return e});var fh=p(t=>{async function e(r={}){let n=await t.post("swarm/peers",{signal:r.signal,searchParams:m(r),headers:r.headers}),{Peers:o}=await n.json();return(o||[]).map(s=>({addr:D(s.Addr),peer:q(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return e});function lh(t){return{addrs:ih(t),connect:ah(t),disconnect:ch(t),localAddrs:uh(t),peers:fh(t)}}var _o=p(t=>{async function*e(r,n={}){let o=new AbortController,s=W(o.signal,n.signal),{headers:i,body:a,total:c,parts:u}=await G(r,o,n.headers),[f,l]=typeof n.progress=="function"?qv(c,u,n.progress):[void 0,void 0],y=await t.post("add",{searchParams:m({"stream-channels":!0,...n,progress:Boolean(f)}),onUploadProgress:l,signal:s,headers:i,body:a});for await(let w of y.ndjson())w=k(w),w.hash!==void 0?yield Hv(w):f&&f(w.bytes||0,w.name)}return e}),qv=(t,e,r)=>e?[void 0,zv(t,e,r)]:[r,void 0],zv=(t,e,r)=>{let n=0,o=e.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*t);for(;n<o;){let{start:c,end:u,name:f}=e[n];if(a<u){r(a-c,f);break}else r(u-c,f),n+=1}}};function Hv({name:t,hash:e,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:t,cid:v.parse(e),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s||0}),i}var dh=N(oe(),1);function ji(t){return typeof t.stream=="function"?Se(t.stream()):Se(new Response(t).body)}async function*Ao(t){yield t}async function yr(t){if(Ee(t))return Ao(Mi(t));if(typeof t=="string"||t instanceof String)return Ao(Mi(t.toString()));if(it(t))return ji(t);if(at(t)&&(t=Se(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=st(t),{value:r,done:n}=await e.peek();if(n)return Ao(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return Ao(Uint8Array.from(await Qr(e)));if(Ee(r)||typeof r=="string"||r instanceof String)return ar(e,Mi)}throw(0,dh.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function Mi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):me(t.toString())}var Oo=N(oe(),1);async function*ph(t,e){if(t==null)throw(0,Oo.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield Po(t.toString(),e);return}if(Ee(t)||it(t)){yield Po(t,e);return}if(at(t)&&(t=Se(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=st(t),{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Ee(n)||typeof n=="string"||n instanceof String){yield Po(r,e);return}throw(0,Oo.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Yr(t)){yield Po(t,e);return}throw(0,Oo.default)(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Po(t,e){let{path:r,mode:n,mtime:o,content:s}=t,i={path:r||"",mode:fr(n),mtime:lr(o)};return s?i.content=await e(s):r||(i.content=await e(t)),i}function hh(t){return ph(t,yr)}function mh(t){let e=_o(t);return p(()=>{async function r(n,o={}){return await ut(e(hh(n),o))}return r})(t)}var yh=p(t=>{async function*e(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:m({arg:r.toString(),...n}),headers:n.headers})).iterator()}return e});var gh=p(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:m(r),headers:r.headers})).json());var wh=p(t=>async(r,n={})=>(await(await t.post("dns",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers})).json()).Path);var bh=p(t=>()=>{let e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}});var vh=p(t=>{async function*e(r,n={}){let o={arg:`${r instanceof Uint8Array?v.decode(r):r}`,...n};o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await t.post("get",{signal:n.signal,searchParams:m(o),headers:n.headers})).iterator()}return e});var Co=p(t=>{async function e(r={}){let o=await(await t.post("id",{signal:r.signal,searchParams:m({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...k(o)};return s.id=q(s.id),s.addresses&&(s.addresses=s.addresses.map(i=>D(i))),s}return e});var xh=t=>{let e=Co(t);async function r(n={}){let o=await e(n);return Boolean(o&&o.addresses&&o.addresses.length)}return r};var Sh=p((t,e)=>{async function*r(n,o={}){let s=`${n instanceof Uint8Array?v.decode(n):n}`;async function i(c){let u=c.Hash;if(u.includes("/")){let l=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await go(e)(l)).cid}else u=v.parse(u);let f={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:Vv(c)};return c.Mode&&(f.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(f.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(f.mtime.nsecs=c.MtimeNsecs)),f}let a=await t.post("ls",{signal:o.signal,searchParams:m({arg:s,...o}),headers:o.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield i(c);return}yield*u.map(i)}}return r});function Vv(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var Eh=p(t=>{async function e(r={}){let n=await t.post("dns",{signal:r.signal,searchParams:m(r),headers:r.headers});return k(await n.json())}return e});var Th=p(t=>{async function*e(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:m({arg:`${r}`,...n}),headers:n.headers,transform:k})).ndjson()}return e});var _h=p(t=>{async function e(r,n={}){let o=await t.post("resolve",{signal:n.signal,searchParams:m({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}return e});var Ah=N(oe(),1),Ph=p(t=>async(r={})=>{throw(0,Ah.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var Oh=p(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:m(r),headers:r.headers})).text()}return e});var Ch=p(t=>{async function e(r={}){let n=await t.post("version",{signal:r.signal,searchParams:m(r),headers:r.headers});return{...k(await n.json()),"ipfs-http-client":"1.0.0"}}return e});var Xv=N(Ih(),1);function Nh(t={}){let e={name:Ot.name,code:Ot.code,encode:u=>u,decode:u=>u},r=Object.values(ze);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(u=>r.push(u));let n=new gn({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),o=Object.values(wu);[cs,Rn,Os,Cs,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>o.push(u));let s=new wn({codecs:o,loadCodec:t.ipld&&t.ipld.loadCodec}),i=Object.values(gu);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(u=>i.push(u));let a=new bn({hashers:i,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:mh(t),addAll:_o(t),bitswap:Kf(t),block:Zl(t),bootstrap:sd(t),cat:yh(t),commands:gh(t),config:pd(t),dag:bd(s,t),dht:Ad(t),diag:kd(t),dns:wh(t),files:Jd(t),get:vh(t),getEndpointConfig:bh(t),id:Co(t),isOnline:xh(t),key:rp(t),log:ip(t),ls:Sh(t),mount:Eh(t),name:pp(t),object:_p(s,t),pin:Hp(t),ping:Th(t),pubsub:Yp(t),refs:eh(t),repo:nh(t),resolve:_h(t),start:Ph(t),stats:sh(t),stop:Oh(t),swarm:lh(t),version:Ch(t),bases:n,codecs:s,hashers:a}}var Rh={nested:{ipfs:{nested:{FileType:{values:{DIRECTORY:0,FILE:1}},MFS:{methods:{ls:{requestType:"LsRequest",responseType:"LsResponse",responseStream:!0},write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse"}}},LsRequest:{fields:{path:{type:"string",id:1}}},LsResponse:{fields:{name:{type:"string",id:1},type:{type:"FileType",id:2},size:{type:"uint32",id:3},cid:{type:"string",id:4},mode:{type:"uint32",id:5},mtime:{type:"int32",id:6},mtimeNsecs:{type:"uint32",id:7}}},WriteRequest:{fields:{path:{type:"string",id:1},content:{type:"bytes",id:2}}},WriteResponse:{fields:{}},PubSub:{methods:{subscribe:{requestType:"SubscribeRequest",responseType:"SubscribeResponse",responseStream:!0},unsubscribe:{requestType:"UnSubscribeRequest",responseType:"UnSubscribeResponse"}}},SubscribeRequest:{fields:{topic:{type:"string",id:1}}},SubscribeResponse:{fields:{handler:{type:"string",id:1},from:{type:"string",id:2},sequenceNumber:{type:"bytes",id:3},data:{type:"bytes",id:4},topic:{type:"string",id:5},key:{type:"bytes",id:6},signature:{type:"bytes",id:7},type:{type:"string",id:8}}},UnSubscribeRequest:{fields:{topic:{type:"string",id:1},handlers:{rule:"repeated",type:"string",id:2}}},UnSubscribeResponse:{fields:{}},Root:{methods:{id:{requestType:"IdRequest",responseType:"IdResponse"},add:{requestType:"AddRequest",requestStream:!0,responseType:"AddResponse",responseStream:!0}}},AddResponseType:{values:{PROGRESS:0,RESULT:1}},IdRequest:{fields:{peerId:{type:"string",id:1}}},IdResponse:{fields:{id:{type:"string",id:1},publicKey:{type:"string",id:2},addresses:{rule:"repeated",type:"string",id:3},agentVersion:{type:"string",id:4},protocolVersion:{type:"string",id:5},protocols:{rule:"repeated",type:"string",id:6}}},AddRequest:{fields:{index:{type:"int32",id:1},type:{type:"FileType",id:2},path:{type:"string",id:3},mode:{type:"uint32",id:4},mtime:{type:"int32",id:5},mtimeNsecs:{type:"uint32",id:6},content:{type:"bytes",id:7}}},AddResponse:{fields:{type:{type:"AddResponseType",id:1},path:{type:"string",id:2},bytes:{type:"int32",id:3},cid:{type:"string",id:4},mode:{type:"uint32",id:5},mtime:{type:"int32",id:6},mtimeNsecs:{type:"uint32",id:7},size:{type:"uint32",id:8}}}}}}};var ba=N(Pm(),1),{Service:k1}=ba.default,Om={keepCase:!1,longs:String,enums:String,defaults:!1,oneofs:!0};function Cm(){let t=ba.default.Root.fromJSON(Rh),e={};return Object.keys(t.nested.ipfs).filter(r=>t.nested.ipfs[r]instanceof k1).map(r=>t.nested.ipfs[r]).forEach(r=>{let n={};e[r.name]=n,Object.keys(r.methods).forEach(o=>{let s=r.methods[o].resolve();n[o]={service:{serviceName:`ipfs.${r.name}`},methodName:o,requestStream:s.requestStream,responseStream:s.responseStream,requestType:{serializeBinary:i=>{let a=s.resolvedRequestType.fromObject(i);return s.resolvedRequestType.encode(a).finish()},deserializeBinary:i=>{let a=s.resolvedRequestType.decode(i),c=s.resolvedRequestType.toObject(a,Om);return Object.defineProperty(c,"toObject",{enumerable:!1,configurable:!1,value:()=>c}),c}},responseType:{serializeBinary:i=>{let a=s.resolvedResponseType.fromObject(i);return s.resolvedResponseType.encode(a).finish()},deserializeBinary:i=>{let a=s.resolvedResponseType.decode(i),c=s.resolvedResponseType.toObject(a,Om);return Object.defineProperty(c,"toObject",{enumerable:!1,configurable:!1,value:()=>c}),c}}}})}),e}var Lt=N(xa(),1);function km(t){return mo(t,yr)}var qo=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Sr=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new qo(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new qo(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Sa(t={}){return I1(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function I1(t,e){e=e??{};let r=e.onEnd,n=new Sr,o,s,i,a=async()=>n.isEmpty()?i?{done:!0}:await new Promise((d,b)=>{s=x=>{s=null,n.push(x);try{d(t(n))}catch(P){b(P)}return o}}):t(n),c=d=>s!=null?s(d):(n.push(d),o),u=d=>(n=new Sr,s!=null?s({error:d}):(n.push({error:d}),o)),f=d=>{if(i)return o;if(e?.objectMode!==!0&&d?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:d})},l=d=>i?o:(i=!0,d!=null?u(d):c({done:!0})),y=()=>(n=new Sr,l(),{done:!0}),w=d=>(l(d),{done:!0});if(o={[Symbol.asyncIterator](){return this},next:a,return:y,throw:w,push:f,end:l,get readableLength(){return n.size}},r==null)return o;let h=o;return o={[Symbol.asyncIterator](){return this},next(){return h.next()},throw(d){return h.throw(d),r!=null&&(r(d),r=void 0),{done:!0}},return(){return h.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(d){return h.end(d),r!=null&&(r(d),r=void 0),o},get readableLength(){return h.readableLength}},o}var ay=N(oe(),1);var Zm=N(Ym(),1),{__extends:PR,__assign:Jo,__rest:OR,__decorate:CR,__param:kR,__metadata:IR,__awaiter:NR,__generator:RR,__exportStar:BR,__createBinding:UR,__values:DR,__read:FR,__spread:LR,__spreadArrays:jR,__spreadArray:MR,__await:$R,__asyncGenerator:qR,__asyncDelegator:zR,__asyncValues:HR,__makeTemplateObject:VR,__importStar:JR,__importDefault:GR,__classPrivateFieldGet:WR,__classPrivateFieldSet:XR,__classPrivateFieldIn:KR}=Zm.default;function ey(t){return t.toLowerCase()}var N1=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],R1=/[^A-Z0-9]+/gi;function ry(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?N1:r,o=e.stripRegexp,s=o===void 0?R1:o,i=e.transform,a=i===void 0?ey:i,c=e.delimiter,u=c===void 0?" ":c,f=ty(ty(t,n,"$1\0$2"),s,"\0"),l=0,y=f.length;f.charAt(l)==="\0";)l++;for(;f.charAt(y-1)==="\0";)y--;return f.slice(l,y).split("\0").map(a).join(u)}function ty(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,o){return n.replace(o,r)},t)}function ny(t,e){return e===void 0&&(e={}),ry(t,Jo({delimiter:"."},e))}function oy(t,e){return e===void 0&&(e={}),ny(t,Jo({delimiter:"-"},e))}function Tr(t={}){let e={};return Object.keys(t||{}).forEach(r=>{typeof t[r]!="function"&&(e[oy(r)]=t[r].toString())}),e}var sy=N(xa(),1),iy=()=>sy.default.grpc.WebsocketTransport;async function B1(t,e,r){for await(let n of r)e.send({serializeBinary:()=>t.requestType.serializeBinary(n)})}function Tt(t,e,r){let n=Sa({objectMode:!0}),o=Sa({objectMode:!0}),s=t.client(e,{...r,host:kt(r.host),transport:iy()({agent:r.agent})});return s.onMessage(i=>{o.push(i)}),s.onEnd((i,a,c)=>{let u;if(i){let f=new Error(a);u=(0,ay.default)(f,c.get("grpc-code")[0],{status:i});let l=c.get("grpc-stack")[0];l=l&&l.replace(/\\n/g,`
`),u.stack=l||f.stack}o.end(u)}),B1(e,s,n).catch(i=>{o.end(i)}).finally(()=>{s.finishSend()}),s.start(Tr(r.metadata)),{sink:n,source:o}}var my=N(hy(),1),yy=N(eo(),1);var dt=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=dt.code}};dt.code="ERR_TIMEOUT";function ke(t,e){return(...r)=>{let n=r[e??r.length-1];if(!n||!n.timeout)return t(...r);let o=typeof n.timeout=="string"?Gn(n.timeout):n.timeout,s=new my.TimeoutController(o);n.signal=(0,yy.anySignal)([n.signal,s.signal]);let i=t(...r),a=new Promise((f,l)=>{s.signal.addEventListener("abort",()=>{l(new dt)})}),c=Date.now(),u=()=>{if(s.signal.aborted)throw new dt;if(Date.now()-c>o)throw s.abort(),new dt};return i[Symbol.asyncIterator]?async function*(){let f=i[Symbol.asyncIterator]();try{for(;;){let{value:l,done:y}=await Promise.race([f.next(),a]);if(y)break;u(),yield l}}catch(l){throw u(),l}finally{s.clear(),f.return&&f.return()}}():(async()=>{try{let f=await Promise.race([i,a]);return u(),f}catch(f){throw u(),f}finally{s.clear()}})()}}function F1(t,e,r,n,o){let s={index:t,type:"DIRECTORY",path:r};o&&(s.mtime=o.secs,s.mtimeNsecs=o.nsecs),n!=null&&(s.mode=n),e.push(s)}async function L1(t,e,r,n,o,s){r instanceof Uint8Array&&(r=[r]);for await(let a of r){let c={index:t,type:"FILE",path:n};s&&(c.mtime=s.secs,c.mtimeNsecs=s.nsecs),o!=null&&(c.mode=o),c.content=new Uint8Array(a,a.byteOffset,a.byteLength),e.push(c)}let i={index:t,type:"FILE",path:n};e.push(i)}async function j1(t,e){let r=1;for await(let{path:n,content:o,mode:s,mtime:i}of km(t)){let a=r;if(r++,o)await L1(a,e,o,n,s,i);else if(n)F1(a,e,n,s,i);else throw new Error("Must pass path or content or both")}}function gy(t,e,r){async function*n(o,s={}){let{source:i,sink:a}=Tt(t,e,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:s,agent:r.agent});j1(o,a).catch(c=>{a.end(c)}).finally(()=>{a.end()});for await(let c of i){if(c.type==="PROGRESS"){s.progress&&s.progress(c.bytes,c.path);continue}yield{path:c.path,cid:v.parse(c.cid),mode:c.mode,mtime:{secs:c.mtime||0,nsecs:c.mtimeNsecs||0},size:c.size}}}return ke(n)}function Wo(t,e,r,n){let{source:o,sink:s}=Tt(t,e,n);return s.push(r),Bt(o)}function wy(t,e,r){async function n(o={}){let i=await Wo(t,e,{},{host:r.url,metadata:Tr(o),agent:r.agent});return{...i,addresses:(i.addresses||[]).map(a=>D(a))}}return ke(n)}function Xo(t,e,r,n){let{source:o,sink:s}=Tt(t,e,n);return s.push(r),o}function by(t,e,r){async function*n(o,s={}){let i={path:o};for await(let a of Xo(t,e,i,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:s,agent:r.agent}))yield{name:a.name,type:a.type.toLowerCase(),size:a.size,cid:v.parse(a.cid),mode:a.mode,mtime:{secs:a.mtime||0,nsecs:a.mtimeNsecs||0}}}return ke(n)}async function vy(t,e,r,n){let{source:o,sink:s}=Tt(t,e,n);for await(let i of r)s.push(i);return s.end(),Bt(o)}async function*M1(t,e){for await(let r of await yr(e))yield{path:t,content:r}}function xy(t,e,r){async function n(o,s,i={}){let a={...i},c=lr(i.mtime);c!=null&&(a.mtime=c.secs,a.mtimeNsecs=c.nsecs);let u=fr(i.mode);u!=null&&(a.mode=u),await vy(t,e,M1(o,s),{host:r.url,debug:Boolean(process.env.DEBUG),metadata:a,agent:r.agent})}return ke(n)}var _r=new Map;function _a(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function Sy(t,e,r){async function n(o,s,i={}){let a={topic:o},c=_a();Promise.resolve().then(async()=>{try{for await(let u of Xo(t,e,a,{host:r.url,debug:Boolean(process.env.DEBUG),metadata:i,agent:r.agent}))if(u.handler){let f=_r.get(o)||new Map;f.set(u.handler,s),_r.set(o,f),c.resolve()}else{let f;if(u.type==="signed"?f={type:"signed",from:q(u.from),sequenceNumber:BigInt(`0x${M(u.sequenceNumber,"base16")}`),data:u.data,topic:u.topic,key:u.key,signature:u.signature}:f={type:"unsigned",data:u.data,topic:u.topic},typeof s=="function"){s(f);continue}s!=null&&typeof s.handleEvent=="function"&&s.handleEvent(f)}}catch(u){i&&i.onError&&i.onError(u)}}),await c.promise}return ke(n)}function Ey(t,e,r){async function n(o,s,i={}){let a=[],c=_r.get(o);if(!c)return;if(s)for(let[f,l]of c.entries())l===s&&a.push(f);await Wo(t,e,{topic:o,handlers:a},{host:r.url,metadata:Tr(i),agent:r.agent});for(let f of a)c.delete(f);c.size||_r.delete(o)}return ke(n)}var Ar=Cm(),Ty={"ws://":"http://","wss://":"https://"};function $1(t){Object.keys(Ty).forEach(e=>{t.url.startsWith(e)&&(t.url=Ty[e]+t.url.substring(e.length))})}function _y(t={url:""}){let e={...t,url:kt(t.url)};return $1(e),{addAll:gy(Lt.default.grpc,Ar.Root.add,e),id:wy(Lt.default.grpc,Ar.Root.id,e),files:{ls:by(Lt.default.grpc,Ar.MFS.ls,e),write:xy(Lt.default.grpc,Ar.MFS.write,e)},pubsub:{subscribe:Sy(Lt.default.grpc,Ar.PubSub.subscribe,e),unsubscribe:Ey(Lt.default.grpc,Ar.PubSub.unsubscribe,e)}}}var q1=ro.bind({ignoreUndefined:!0});function z1(t={}){let e=[];return t.http&&e.push(Nh({...t,url:t.http})),t.grpc&&e.push(_y({...t,url:t.grpc})),q1({},...e)}return Iy(H1);})();
return IpfsClient}));
